var q=Object.defineProperty,z=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var V=(e,t,r)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))Q.call(t,r)&&V(e,r,t[r]);if(j)for(var r of j(t))X.call(t,r)&&V(e,r,t[r]);return e},f=(e,t)=>z(e,H(t));import{j as B,R as $,r as h,l as g,e as b,a as Y}from"./vendor.953d3f7a.js";const ee=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};ee();const te=(e,t)=>{switch(console.log(t),e){case"getDescription":return{method:"GET",link:"https://api.github.com/repos/Clovis-Breh/Clarity-database/contents/descriptions.json?ref=main",token:`token ${atob(localStorage.getItem("key")||"")}`};case"putDescription":return{method:"PUT",link:"https://api.github.com/repos/Clovis-Breh/Clarity-database/contents/descriptions.json",token:`token ${atob(localStorage.getItem("key")||"")}`,body:{sha:t.sha,branch:"main",message:`Updated ${new Date().toLocaleString()}`,content:btoa(`${JSON.stringify(t.content,null,2)}
`)}};case"rateLimit":return{method:"GET",link:"https://api.github.com/rate_limit",token:`token ${atob(localStorage.getItem("key")||"")}`}}};async function D(e,t){const r=te(e,t),a=await fetch(r.link,{method:r.method,mode:"cors",headers:{authorization:r.token,accept:"application/vnd.github.v3+json"},body:JSON.stringify(r==null?void 0:r.body)}),{content:o,sha:i}=await a.json();if(r.method=="GET")return{status:a.status,content:o?JSON.parse(atob(o)):null,sha:i}}async function ne(e){const t={armorName:e.perkData.armorName?e.perkData.armorName:void 0,armorId:e.perkData.armorId?e.perkData.armorId:void 0,secondaryEditor:Object.keys(e.dataFromEditor.converted.secondaryEditor).length>0?e.dataFromEditor.converted.secondaryEditor:void 0},r={name:e.perkData.name,id:e.perkData.id,armorName:t.armorName,armorId:t.armorId,description:e.dataFromEditor.converted.mainEditor,simpleDescription:t.secondaryEditor,editor:{mainEditor:e.dataFromEditor.original.mainEditor,secondaryEditor:e.dataFromEditor.original.secondaryEditor},lastUpdate:new Date},{status:a,content:o,sha:i}=await D("getDescription");D("putDescription",{sha:i,content:f(d({},o),{[e.inputData.type]:f(d({},o[e.inputData.type]),{[r.id]:r})})})}async function G(){const{status:e,content:t}=await D("getDescription");return t}const n=B.exports.jsx,m=B.exports.jsxs,A=B.exports.Fragment,x=$.createContext({}),w=$.createContext({});function ae({children:e}){const[t,r]=h.exports.useState({inputData:{inputId:"",type:"none",rarity:""},perkData:{id:0,name:"Fading Memory",armorId:0,armorName:"",defaultDescription:"",descriptions:{mainEditor:"",secondaryEditor:""}},dataFromEditor:{converted:{mainEditor:{},secondaryEditor:{}},original:{mainEditor:"",secondaryEditor:""}},dataFromGithub:{}});return h.exports.useEffect(()=>{G().then(a=>r(o=>f(d({},o),{dataFromGithub:a}))),D("rateLimit").then(console.log)},[]),n(x.Provider,{value:t,children:n(w.Provider,{value:r,children:e})})}const re="_info_display_of2ab_1";var ie={info_display:re};function oe(){const e=h.exports.useContext(x),t=e.perkData;function r(){switch(e.inputData.type){case"armorExotic":return m(A,{children:[n("label",{children:"Armor name"}),n("span",{id:"input_item_name",children:t.armorName||""}),n("label",{children:"Armor id"}),n("span",{id:"input_item_id",children:t.armorId||""}),n("label",{children:"Perk name"}),n("span",{id:"input_name",children:t.name||""}),n("label",{children:"Perk id"}),n("span",{id:"input_id",children:t.id||""})]});case"armorMods":case"weaponMods":return m(A,{children:[n("label",{children:"Mod name"}),n("span",{id:"input_item_name",children:t.name||""}),n("label",{children:"Mod id"}),n("span",{id:"input_item_id",children:t.id||""})]});default:return m(A,{children:[n("label",{children:"Perk name"}),n("span",{id:"input_item_name",children:t.name||""}),n("label",{children:"Perk id"}),n("span",{id:"input_item_id",children:t.id||""})]})}}return m("div",{className:ie.info_display,children:[r(),n("label",{children:"Last update"}),n("span",{id:"input_item_id",children:"2022.1.27-13.22"})]})}const se="_selection_list_1ea9h_1";var ce={selection_list:se};function le(){const e=h.exports.useContext(w),t=h.exports.useContext(x),r=c=>{e(s=>f(d({},s),{inputData:f(d({},s.inputData),{type:c.target.value})}))},a=c=>{e(s=>f(d({},s),{inputData:f(d({},s.inputData),{rarity:c.target.value})}))},o=()=>Object.values(t.dataFromGithub[t.inputData.type]||{}).map(c=>n("option",{value:c.id,children:c.name},c.id)),i=c=>{var l;const s=(l=t.dataFromGithub[t.inputData.type])==null?void 0:l[c.target.value];!s||e(u=>f(d({},u),{perkData:f(d({},u.perkData),{id:s.id,name:s.name,armorId:s.armorId,armorName:s.armorName,descriptions:{mainEditor:s.editor.mainEditor,secondaryEditor:s.editor.secondaryEditor}})}))};return m("div",{className:ce.selection_list,children:[m("select",{onChange:c=>r(c),children:[n("option",{value:"none",children:"Select description type"}),n("option",{value:"armorExotic",children:"Exotic Armor"}),n("option",{value:"armorMods",children:"Armor Mod"}),n("option",{value:"weaponPerks",children:"Weapon Perk"}),n("option",{value:"weaponFrames",children:"Weapon Frame"}),n("option",{value:"weaponMods",children:"Weapon Mod"})]}),m("select",{onChange:c=>a(c),children:[n("option",{value:"undefined",children:"Rarity All"}),n("option",{value:"normal",children:"Rarity Normal"}),n("option",{value:"exotic",children:"Rarity Exotic"})]}),n("select",{onChange:c=>i(c),children:o()})]})}const U=async e=>new Promise((t,r)=>{fetch(`https://www.bungie.net/Platform/Destiny2/Manifest/DestinyInventoryItemDefinition/${e}`,{method:"GET",mode:"cors",headers:{"X-API-Key":"cda7b6e4fc9f49ada4fed618e11841ab"}}).then(a=>a.json()).then(a=>t(a.Response)).catch(r)});function de(e){const t=async a=>{const o=a.sockets.socketEntries[11].singleInitialItemHash,i=await U(o);return{id:i.hash,name:i.displayProperties.name,armorId:a.hash,armorName:a.displayProperties.name,description:i.displayProperties.description}},r=a=>({id:a.hash,name:a.displayProperties.name,description:a.displayProperties.description});return U(e).then(a=>a.itemType==2?t(a):r(a)).catch(console.error)}const me="_button_10xcl_1";var pe={button:me};function M({labelText:e}){const t=h.exports.useContext(x),r=h.exports.useContext(w),a=()=>{de(t.inputData.inputId).then(l=>r(f(d({},t),{perkData:d(d({},t.perkData),l)})))},o=()=>ne(t),i=()=>G().then(l=>r(u=>f(d({},u),{dataFromGithub:l}))),c=e=="Get data from bungie"?a:e=="Add / Update description"?o:e=="Get updated data"?i:void 0,s=e=="Change Editor"?"toggleEditor":void 0;return n("button",{className:pe.button,onClick:c,id:s,children:e})}const ue="_id_input_1pgx1_1";var fe={id_input:ue};function he(){const e=d({},h.exports.useContext(x)),t=h.exports.useContext(w),r=a=>(e.inputData.inputId=a.target.value,t(e));return m("div",{className:fe.id_input,children:[n("span",{children:"ID:"}),n("input",{type:"number",onChange:a=>r(a)})]})}const ge="_pvp_1l6kr_1",_e="_pve_1l6kr_5",be="_highlight_1_1l6kr_9",ye="_highlight_2_1l6kr_13",ve="_highlight_3_1l6kr_17",ke="_highlight_4_1l6kr_21",xe="_arc_1l6kr_25",Ee="_solar_1l6kr_26",Te="_stasis_1l6kr_28",we="_primary_1l6kr_33",Ce="_special_1l6kr_34",Ne="_heavy_1l6kr_35",Ie="_center_1l6kr_110",De="_spacer_1l6kr_114",Ae="_bold_1l6kr_118",Me="_background_1l6kr_122",Pe="_title_1l6kr_126",Se="_link_1l6kr_130",Fe="_table_1l6kr_137";var Z={pvp:ge,pve:_e,highlight_1:be,highlight_2:ye,highlight_3:ve,highlight_4:ke,arc:xe,solar:Ee,void:"_void_1l6kr_27",stasis:Te,primary:we,special:Ce,heavy:Ne,center:Ie,spacer:De,bold:Ae,background:Me,title:Pe,link:Se,table:Fe};const Re=e=>{if(e)return`${Math.round(Math.random()*1e3)}ms`},Be=e=>{if(e.linkUrl)return n("a",{href:e.linkUrl,children:e.linkText});if(e.formula||e.formulaText)return m("span",{children:[e.formulaText," ",Re(e.formula)]})},K=e=>e==null?void 0:e.split(" ").map(t=>Z[t]).join(" ");function $e({description:e}){const t=(o,i)=>{var c;return n("div",{className:K(o.className),children:(c=o.lineText)==null?void 0:c.map((s,l)=>n("span",{className:K(s.className),title:s.title,children:s.text||Be(s)},l))},i)},r=(o,i)=>n("div",{className:Z.table,children:o.map((c,s)=>t(c,s))},i);return n("div",{children:(o=>{if(!(!o||Object.keys(o).length===0))return o==null?void 0:o.map((i,c)=>(i==null?void 0:i.table)?r(i.table,c):t(i,c))})(e)})}const Le="_notes_1hbar_1",je="_pencil_1hbar_7";var Ve={notes:Le,pencil:je};function Ge(){return m("div",{className:Ve.notes,children:[n("div",{className:"fas fa-pencil-alt"}),n("div",{className:"text",children:"Add a note"})]})}var Ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAAoCAYAAACrUDmFAAAAAXNSR0IArs4c6QAABXlJREFUaEPdWu1yIjkMlGd/JnncvQUeAAh53MDPta9aUtvyMJCAuU32qFQKgsd267MlJcmV1+b4VvA1fiVdV6QUkaQf8KtIkeTf2Tp80G9ykTThjT3Jl60p+NHF+Nre379m+/xPf0jY6+IXCs4wtMuFzwbNwZZkUFUStigXkckF0QTE7bg1hMOdKMQb1uBACFySbJ9/LmJZ/OPawdmFHR/20g2TQI3UIvE37HZ51Y4/amv1sSYz1zT+mCW5MG5c4/vaPYtsn841eQZwc3orBQCqFZ7LIILKpXSagkjtWRPE3ZcP5v7RPqZFs4TdTJPd7dfvB1ONa8oewl2pAtNi9R9XiWExX4x++NHFdNf/QAjbp2auFSDMMpViMSElwXuLGMuq78PC13yqrrQgKIJUgIyWus68RbWGSLh7uRyhvgZWf+r69GZxesESYK4pRkuCo+Z2C077HUDN74C4ccnUO4BRg7srueU7glRzZZYKETsZ+pq39e6Xcsp3BBbvBGuc59xegx4GHwGQh83D9pl5HQ8a5B91ZtxfwZ5pMInEMHuP1jbHA1KpUTVcPoTtuF8fBcctR7G4n5FZGUA634M0aNprjOaSdjang+clgz2qxZgNKiRG0UijPjKra1qF9ipNC1RqfnmAU3IAkmBMS0P9diAt0RprUAEjq2kiaHHERNfQSnamVrnNOYXqBOFRDixpP5CaYvWjSgBPqWo16qhXGjEVZUSoJpTjt/A8TzsM660Ys7Uj1mNnm6Z4cgeQvjgC8J6g9Khn1Hq8wIT5I8b1GnRf+GsB1uDWirf/lwaPh1rTWKeBQcYdktFsRIMsuRIijUxSchb5IbJ7+tWXZriMVi/B+UVk99yvu8V8V6e3MqGVUEu+mYk+wgfXmuRRjUxSSjYASeR1Fh1XClAke9uA6PcDHJg+qMFNrTQ93gdXIL0lK4tBueWdJ9nPNPPr/VAmgQAgCPRvrJDevtyvQQi3mYk3TuZ5ECt2F6jVZ8xF67NS5LeI/EioYkyT+9nF1++vRbWrhgxNWpE9UsVAuFqvh35fTfRKw/01losOJXm3C0ehZwNtzn1wc3y1liQ7cXDFLLIfYDItt7YejXJRBhcmx5EgA0fX4MFEj86AnDMUaNrOzUoKgHRKSPT3dxCwJ9lKUrohkmhSjVVdZv+fMlEtPN3J/eJLDMVcw5ZCGOR3I1SNPlgVBrOPB5Ekj5toMtO7QtW0pFJ/Me2ZP475oAF0ssaOX9VgcM0RgMZtq6VoTgKQ+Z61VCI4b1WOnE0NIgMzFXZBhtFnzA/6Go9he+7XIARKG11z5JAjja6V93Urycf+QG19UHJwSPt+R2c1zxmFmsxCl4DBzZyQ3HG0mghYOLdoJuXFZxHZvSwPMj4TZL5yTavoW85TE9UIps4uUnTkJTJCmb4CJCxHa1BP6Bw3pI37AnmoTZDgG9NQ8fknQa5O4LWYNVrmqbMSfMZFzOFbk8gAWpAf8cc/AVLBMYnTlz2mILCF4curVsPZc5d+k1AVf+Phi2su5lHPrLXt0tVokAanllOcvao6vfRhKnUN19lcGLHVmMipm/t87JfwIp2WQc69YaUmlL0D4ZGY3MF5j02Y2V0K+TSmmg4gzVXrXyRojnh9IGr3rFyhTnGNXCfJPrUl1yZmHWdXu6cM+9l+azKQKMezKAZvJuEimI8r5+V/Cdh953n0DKCC9N5mHNArVmy6KFU7JDIIFgnYLwJsWnAi5zf4nBCMIRlNsWhPq8A5S/+MsAiwB5m9IJ08H8f/qyDbZOuhzkx9MmySvxXgNSE0swxgr3DYiwAV5OlQsrbfWPxYCiFLsc6qU3SPYHo5j2K1mHBj1jgdJH+rlo0/u4l7SwLHXeOv/wLWRuBwVZFjtwAAAABJRU5ErkJggg==";const Ze="_header_abt89_1",Ke="_name_abt89_10",Je="_bottom_abt89_19",Oe="_left_abt89_25",We="_right_abt89_32",qe="_type_abt89_38",ze="_ammo_abt89_43",He="_breaker_abt89_49",Qe="_element_abt89_55",Xe="_power_abt89_60";var _={header:Ze,name:Ke,bottom:Je,left:Oe,right:We,type:qe,ammo:ze,breaker:He,element:Qe,power:Xe};function Ye(e){var a;const t=m("div",{className:_.left,children:[n("div",{className:_.type,children:"Shadow Rifle"}),e.ammo.img?n("img",{className:_.ammo,src:Ue}):null,e.breaker.img?n("img",{className:_.breaker,src:e.breaker.img}):null]}),r=m("div",{className:_.right,children:[((a=e.element)==null?void 0:a.img)?n("img",{className:_.element,src:e.element.img}):null,n("div",{className:_.power,children:e.power})]});return m("div",{className:_.header,children:[n("a",{className:_.name,children:e.name}),m("div",{className:_.bottom,children:[t,r]})]})}const et="_perk_box_z1cvm_1",tt="_perk_list_z1cvm_9",nt="_perk_z1cvm_1",at="_perk_active_z1cvm_28",rt="_icon_container_z1cvm_32",it="_icon_container_active_z1cvm_45",ot="_name_z1cvm_49",st="_name_active_z1cvm_55",ct="_description_z1cvm_59";var y={perk_box:et,perk_list:tt,perk:nt,perk_active:at,icon_container:rt,icon_container_active:it,name:ot,name_active:st,description:ct};function lt(){const e=h.exports.useContext(x),t=[];for(let r=0;r<4;r++){const a=r==0?e==null?void 0:e.dataFromEditor.converted.mainEditor:r==1?e==null?void 0:e.dataFromEditor.converted.secondaryEditor:null;t.push(m("div",{className:y.perk_list,children:[a?n("div",{className:y.description,children:n($e,{description:a})}):null,m("div",{className:`${y.perk} ${y.perk_active}`,children:[n("div",{className:`${y.icon_container} ${y.icon_container_active}`,children:n("img",{src:"https://bungie.net/common/destiny2_content/icons/f2ff6ea4498ad2d808b4af21e93cf5fe.png"})}),n("div",{className:`${y.name} ${y.name_active}`,children:e==null?void 0:e.perkData.name})]})]},r))}return n("div",{className:y.perk_box,children:t})}const dt="_item_sockets_1hqtd_1",mt="_frame_img_1hqtd_9",pt="_sockets_1hqtd_16",ut="_frame_info_1hqtd_32",ft="_masterwork_img_1hqtd_44";var C={item_sockets:dt,frame_img:mt,sockets:pt,frame_info:ut,masterwork_img:ft};function ht(){return m("div",{className:C.item_sockets,children:[n("img",{className:C.frame_img,src:"https://www.bungie.net/common/destiny2_content/icons/0ce2f3a9046c3b1e2fc007d903563e66.png"}),m("div",{className:C.frame_info,children:[n("div",{children:"Shadow Frame"}),n("div",{children:"420 rpm / 69 impact"})]}),m("div",{className:C.sockets,children:[n("div",{children:n("img",{src:"https://www.bungie.net/common/destiny2_content/icons/aeacc06cbe147ec400a10225a4dcd504.png"})}),n("div",{children:n("img",{src:"https://www.bungie.net/common/destiny2_content/icons/4e3573080845b4ee9efcb000d4924cb0.jpg"})}),m("div",{className:C.masterwork_img,children:[n("img",{src:"https://www.bungie.net/common/destiny2_content/icons/8ebd558417d6c02e3ed2ffadc4bdbc48.jpg"}),n("img",{src:"https://www.bungie.net/common/destiny2_content/icons/5c935649e5d3e72c967d6b20c3e44e85.png"})]})]})]})}function gt(e){const t=e.recoilStat,r=1+Math.cos((-20-t*.6)*Math.PI/180),a=1+Math.sin((-20-t*.6)*Math.PI/180),o=2-r,i=Math.sin((5+t)*Math.PI/10)*(100-t);return m("svg",{height:"12",viewBox:"0 0 2 1",children:[n("circle",{r:"1",cx:"1",cy:"1",fill:"rgba(24, 30, 37, 1)"}),n("path",{style:{transform:`rotate(${i*.8}deg)`,transformOrigin:"50% 100%"},d:`M 1 1 L ${o} ${a} A 1 1 0 0 1 ${r} ${a} Z`,fill:"#FFF"})]})}const _t="_stats_vihyy_1",bt="_name_vihyy_14",yt="_value_vihyy_20",vt="_barr_vihyy_26";var P={stats:_t,name:bt,value:yt,barr:vt};function kt(e){switch(e){case"Auto Rifle":case"Hand Cannon":case"Pulse Rifle":case"Scout Rifle":case"Shotgun":case"Sniper Rifle":case"Submachine Gun":case"Machine Gun":return[4284893193,4043523819,1240592695,155624089,943549884,4188031367,1345609583,3555269338,2715839340,3871231066];case"Fusion Rifle":case"Linear Fusion Rifle":return[2961396640,4043523819,1240592695,155624089,943549884,4188031367,1345609583,3555269338,2715839340,3871231066];case"Rocket Launcher":case"Grenade Launcher":return[3611281802,2523465841,155624089,943549884,4188031367,1345609583,3555269338,2715839340,3871231066];case"Combat Bow":return[447667954,4043523819,1591432999,1556424089,943549884,4188031367,1345609583,3555269338,2715839340,1931675084];case"Sword":return[2837207746,4043523819,2762071195,209426660,3022301683,3736848092,925767036]}}const N={perks:{155624089:29.8,943549884:55,1240592695:79.3,1345609583:52,2715839340:86,3555269338:20,3871231066:31.6,4043523819:33,4188031367:44.2,4284893193:360},all:{155624089:30,943549884:55,1240592695:79,1345609583:52,2715839340:86,3555269338:20,3871231066:32,4043523819:33,4188031367:45,4284893193:360},mod:{155624089:0,943549884:0,1240592695:0,1345609583:0,2715839340:0,3555269338:0,3871231066:0,4043523819:0,4188031367:0,4284893193:0},masterwork:{155624089:0,943549884:0,1240592695:0,1345609583:0,2715839340:0,3555269338:0,3871231066:0,4043523819:0,4188031367:.8999999999999986,4284893193:0}};function xt(){const e={4284893193:{statBarPlace:null,name:"Rounds Per Minute"},447667954:{statBarPlace:"ms",name:"Draw Time"},2961396640:{statBarPlace:"ms",name:"Charge Time"},2837207746:{statBarPlace:"stat_bar",name:"Swing Speed"},4043523819:{statBarPlace:"stat_bar",name:"Impact"},3614673599:{statBarPlace:"stat_bar",name:"Blast Radius"},1591432999:{statBarPlace:"stat_bar",name:"Accuracy"},2523465841:{statBarPlace:"stat_bar",name:"Velocity"},2762071195:{statBarPlace:"stat_bar",name:"Guard Efficiency"},209426660:{statBarPlace:"stat_bar",name:"Guard Resistance"},1240592695:{statBarPlace:"stat_bar",name:"Range"},155624089:{statBarPlace:"stat_bar",name:"Stability"},943549884:{statBarPlace:"stat_bar",name:"Handling"},4188031367:{statBarPlace:"stat_bar",name:"Reload Speed"},1345609583:{statBarPlace:"stat_bar",name:"Aim Assistance"},3555269338:{statBarPlace:"stat_bar",name:"Zoom"},2715839340:{statBarPlace:"stat_svg",name:"Recoil Direction"},3022301683:{statBarPlace:"stat_bar",name:"Charge Rate"},3736848092:{statBarPlace:"stat_bar",name:"Guard Endurance"},3871231066:{statBarPlace:null,name:"Magazine"},1931675084:{statBarPlace:null,name:"Inventory Size"},925767036:{statBarPlace:null,name:"Ammo Capacity"}},t=kt("Auto Rifle"),r=[];return t==null||t.forEach((a,o)=>{const i=e[a];switch(r.push(n("div",{className:P.name,children:i.name},`${o}a`)),r.push(n("div",{className:P.value,children:N.all[a]},`${o}b`)),i.statBarPlace){case"stat_bar":const c=N.perks[a],s=N.mod[a],l=N.masterwork[a];r.push(m("div",{className:P.barr,children:[c?n("div",{style:{width:`${c}%`}}):null,s?n("div",{style:{width:`${s}%`}}):null,l?n("div",{style:{width:`${l}%`}}):null]},`${o}c`));break;case"stat_svg":r.push(n(gt,{recoilStat:N.perks[a]},o+30));break;case"stat_letter":r.push(m("div",{children:[" ",i.statBarPlace]},`${o}g`))}}),m("div",{className:P.stats,children:[r,"add in game stats"]})}const Et=e=>e.replace(/\r/g,"").split(/(< table >[^]*?<\$>)/g).flatMap(t=>t||[]).map(t=>t.endsWith(`
`)?t.slice(0,-1):t).map(t=>t.startsWith(`
`)?t.slice(1):t),Tt=e=>e.reduce((t,r)=>{const a="(\\|)(?!.*\\|).*",o="\\|?.*?(?=\\|)",i=r.lineText.match(new RegExp(`(${a})|(${o})`,"g"));return t.push(f(d({},r),{lineText:i})),t},[]),J=e=>{const t=e.startsWith("< table >"),a=e.replace(/(< table >\n)|(\n<\$>)/g,"").split(/\n/).reduce((o,i)=>{var u;const c=new RegExp(/(<center\/>)|(<bold\/>)|(<background\/>)/g),s=(u=i.match(c))==null?void 0:u.join(" ").replace(/<|\/>/g,""),l=i.replace(c,"");return o.push({lineText:l,className:t?s:l==""?"spacer":s}),o},[]);return t?{table:Tt(a),className:"table"}:a},O=e=>{const t=typeof e=="string"?e:e.lineText,r="<(?:highlight_[1-4]|pve|pvp|bold|link|title|stasis|arc|solar|void|primary|special|heavy|background|center)",a="/>",i=t.split(new RegExp(`(${r}.*?${a})`,"g")).reduce((s,l)=>{var v,k,E;const u=l.startsWith("|");if(l.startsWith("<")||u){const p=l.match(/(https:.+? )|((?<=https:.+? ).*(?=\/>))/g),T=l.match(/\[.*\]/g),S=l.includes("<formula"),L=S?(v=l.match(/(ready|stow|range|reload)_\d+/g))==null?void 0:v[0]:void 0,F=S?l.replace(L||"","").replace(/<formula |\/>/g,""):void 0;let R=(k=l.match(new RegExp(r,"g")))==null?void 0:k.join(" ").replaceAll("<",""),I=l.replace(new RegExp(`${r}|${a}`,"g"),"");return u&&(R=`${R||""} ${l.startsWith("|b")?"bold":""}`.trim()||void 0,I=I.replace(/\|b|\|/g,"").trim()),s.push({formulaText:F==null?void 0:F.replace(/\|b|\|/g,"").trim(),formula:L,linkUrl:(E=p==null?void 0:p[0])==null?void 0:E.trim(),linkText:p==null?void 0:p[1],title:T?T[0].replace(/[[\]]/g,""):void 0,className:R,text:p||S?void 0:T?I.replace(/\[.*\]/g,""):I}),s}return l.trim()&&s.push({text:l}),s},[]),c=s=>s.length==1?s:s.reduce((l,u)=>(Object.entries(u).forEach(([v,k])=>{k&&(l[v]=`${l[v]||""} ${k}`)}),l),{});return typeof e=="string"?c(i):f(d({},e),{lineText:i.length==0?void 0:i})};function W(e){return Et(e).reduce((o,i)=>i.startsWith("< table >")?(o.push(J(i)),o):(o.push(...J(i)),o),[]).map(o=>{if(o.table){const i=o.table.map(c=>{var l;const s=(l=c.lineText)==null?void 0:l.flatMap(u=>O(u));return f(d({},c),{lineText:s})});return f(d({},o),{table:i})}else return O(o)})}function wt({onMount:e}){const t=h.exports.useContext(w),r=h.exports.useContext(x),[a,o]=h.exports.useState(null),[i,c]=h.exports.useState(!1);return h.exports.useEffect(()=>{var l,u,v,k;if(!a){o(e()),c(!0);return}const s=E=>{const p={normal:{main:a.normal.main.getValue(),secondary:a.normal.secondary.getValue()},diff:{main:a.diff.main.getModifiedEditor().getValue(),secondary:a.diff.secondary.getModifiedEditor().getValue()}};t(T=>f(d({},T),{dataFromEditor:{converted:{mainEditor:W(p.normal.main),secondaryEditor:W(p.normal.secondary)},original:{mainEditor:p.normal.main,secondaryEditor:p.normal.secondary}}})),E==="normal"&&(p.normal.main!=p.diff.main&&a.diff.main.getModifiedEditor().setValue(p.normal.main),p.normal.secondary!=p.diff.secondary&&a.diff.secondary.getModifiedEditor().setValue(p.normal.secondary)),E==="diff"&&(p.normal.main!=p.diff.main&&a.normal.main.setValue(p.diff.main),p.normal.secondary!=p.diff.secondary&&a.normal.secondary.setValue(p.diff.secondary))};(l=a.normal.main.getModel())==null||l.onDidChangeContent(()=>s("normal")),(u=a.normal.secondary.getModel())==null||u.onDidChangeContent(()=>s("normal")),(v=a.diff.main.getModifiedEditor().getModel())==null||v.onDidChangeContent(()=>s("diff")),(k=a.diff.secondary.getModifiedEditor().getModel())==null||k.onDidChangeContent(()=>s("diff"))},[i]),h.exports.useEffect(()=>{if(console.log(123),!a)return;const s=r.perkData.descriptions.mainEditor,l=r.perkData.descriptions.secondaryEditor;a.normal.main.setValue(s),a.normal.secondary.setValue(l),a.diff.main.getModifiedEditor().setValue(s),a.diff.secondary.getModifiedEditor().setValue(l),a.diff.main.getOriginalEditor().setValue(s),a.diff.secondary.getOriginalEditor().setValue(l)},[r.perkData.descriptions.mainEditor,r.perkData.descriptions.secondaryEditor]),m("div",{className:"editor-container",children:[n("div",{id:"editor-1"}),n("div",{id:"editor-2"}),n("div",{id:"diffEditor-1",className:"hidden"}),n("div",{id:"diffEditor-2",className:"hidden"})]})}function Ct(){var o;g.register({id:"clarityLangue"}),g.setMonarchTokensProvider("clarityLangue",{tokenizer:{root:[[/< table >/,"table","@table"],[/<(stasis|arc|solar|void|primary|special|heavy|background|center)/,"selfContained","@selfContained"],[/<(highlight_[1-4]|pve|pvp|bold)/,"highlight","@highlight"],[/<(formula|link)/,"extra","@extra"],[/<title /,"title","@title"]],table:[[/<\$>/,"tableEnd","@pop"],[/\|b|\|/,"tableSeparator"],[/<(stasis|arc|void|solar|background|center)/,"selfContained","@selfContained"],[/<(highlight_[1-4]|bold|primary|special|heavy|pve|pvp)/,"highlight","@highlight"],[/<(formula|link)/,"extra","@extra"]],selfContained:[[/\/>/,"selfContained","@pop"],[/./,"selfContained.text"]],highlight:[[/\/>/,"highlight","@pop"],[/./,"highlight.text"]],extra:[[/\/>/,"extra","@pop"],[/(ready|stow|range|reload)_\d+/,"extra.content"],[/https:.+? /,"extra.content"],[/./,"extra.text"]],title:[[/\/>/,"title","@pop"],[/\[.*\]/,"title.text"]]}}),b.defineTheme("myCoolTheme",{base:"vs",inherit:!1,rules:[{token:"table",foreground:"4fc1ff"},{token:"tableSeparator",foreground:"4fc1ff"},{token:"tableEnd",foreground:"4fc1ff"},{token:"selfContained",foreground:"9cdcfe"},{token:"selfContained.text",foreground:"d16969"},{token:"highlight",foreground:"4fc1ff"},{token:"highlight.text",foreground:"ffffff"},{token:"extra",foreground:"4ec9b0"},{token:"extra.text",foreground:"ffffff"},{token:"extra.content",foreground:"4fc1ff"},{token:"bold.selfContained",foreground:"9cdcfe"},{token:"bold",foreground:"4fc1ff"},{token:"bold.text",foreground:"ffffff"},{token:"title",foreground:"4ec9b0"},{token:"title.text",foreground:"4fc1ff"}],colors:{"editor.foreground":"#ffffff","editor.background":"#1e1e1e","editorLineNumber.foreground":"#858585","editorLineNumber.activeForeground":"#c6c6c6","editorCursor.foreground":"#ffffff","editor.lineHighlightBorder":"#fff0","editor.selectionBackground":"#004972b8","editorSuggestWidget.background":"#252526","editorSuggestWidget.border":"#454545","list.hoverBackground":"#2a2d2e","diffEditor.removedTextBackground":"#ff000070","diffEditor.insertedTextBackground":"#a0bf5652"}}),g.registerCompletionItemProvider("clarityLangue",{provideCompletionItems:()=>{const i={kind:g.CompletionItemKind.Snippet,insertTextRules:g.CompletionItemInsertTextRule.InsertAsSnippet};return{suggestions:[d({label:"table",insertText:["< table > ","$0","<$>"].join(`
`)},i),{label:"background",kind:g.CompletionItemKind.Text,insertText:"<background/>"},{label:"center",kind:g.CompletionItemKind.Text,insertText:"<center/>"},{label:"bold line",kind:g.CompletionItemKind.Text,insertText:"<bold/>"},{label:"stasis",kind:g.CompletionItemKind.Text,insertText:"<stasis/>"},{label:"arc",kind:g.CompletionItemKind.Text,insertText:"<arc/>"},{label:"void",kind:g.CompletionItemKind.Text,insertText:"<void/>"},{label:"solar",kind:g.CompletionItemKind.Text,insertText:"<solar/>"},{label:"primary",kind:g.CompletionItemKind.Text,insertText:"<primary/>"},{label:"special",kind:g.CompletionItemKind.Text,insertText:"<special/>"},{label:"heavy",kind:g.CompletionItemKind.Text,insertText:"<heavy/>"},d({label:"highlight",insertText:"<highlight_${1:1} ${2: } />"},i),d({label:"bold text",insertText:"<bold ${1: } />"},i),d({label:"pve",insertText:"<pve ${1: } />"},i),d({label:"pvp",insertText:"<pvp ${1: } />"},i),d({label:"link",insertText:"<link ${1: } ${2: }>"},i),d({label:"combatant",insertText:"<link https://d2clarity.page.link/combatant ${1:Combatant}/>"},i),d({label:"formula_ready",insertText:"<formula ${2:Ready Speed:} ready_${1:0} />"},i),d({label:"formula_stow",insertText:"<formula ${2:Stow Speed:} stow_${1:0} />"},i),d({label:"formula_range",insertText:"<formula ${2:In_Game Range:} range_${1:0} />"},i),d({label:"formula_reload",insertText:"<formula ${2:Reload Time:} reload_${1:0} />"},i),d({label:"formula_ready_empty",insertText:"<formula ready_${1:0} />"},i),d({label:"formula_stow_empty",insertText:"<formula stow_${1:0} />"},i),d({label:"formula_range_empty",insertText:"<formula range_${1:0} />"},i),d({label:"formula_reload_empty",insertText:"<formula reload_${1:0} />"},i),d({label:"title",insertText:"<title ${1: } [${1: }] />"},i)]}}});const e={theme:"myCoolTheme",language:"clarityLangue",minimap:{enabled:!1},lineNumbersMinChars:2,automaticLayout:!0,wordWrap:"on"},t={normal:{main:document.querySelector("#editor-1"),secondary:document.querySelector("#editor-2")},diff:{main:document.querySelector("#diffEditor-1"),secondary:document.querySelector("#diffEditor-2")}},r={main:{original:b.createModel("","clarityLangue"),modified:b.createModel("","clarityLangue")},secondary:{original:b.createModel("","clarityLangue"),modified:b.createModel("","clarityLangue")}},a={normal:{main:b.create(t.normal.main,e),secondary:b.create(t.normal.secondary,e)},diff:{main:b.createDiffEditor(t.diff.main,e),secondary:b.createDiffEditor(t.diff.secondary,e)}};return a.diff.main.setModel({modified:r.main.modified,original:r.main.original}),a.diff.secondary.setModel({modified:r.secondary.modified,original:r.secondary.original}),(o=document.querySelector("#toggleEditor"))==null||o.addEventListener("click",()=>{const i=t.normal,c=t.diff;i.main.classList.toggle("hidden"),i.secondary.classList.toggle("hidden"),c.main.classList.toggle("hidden"),c.secondary.classList.toggle("hidden")}),d({},a)}const Nt={ammo:{img:"https://bungie.net/common/destiny2_content/icons/b6d3805ca8400272b7ee7935b0b75c79.png",type:"special"},breaker:{img:"https://www.bungie.net/common/destiny2_content/icons/DestinyBreakerTypeDefinition_825a438c85404efd6472ff9e97fc7251.png",type:"special"},element:{img:"https://www.bungie.net/common/destiny2_content/icons/DestinyDamageTypeDefinition_530c4c3e7981dc2aefd24fd3293482bf.png",type:"special"},power:69420,name:"FADING SHADOW'S BURDEN"};function It(){return m(A,{children:[m("div",{className:"item_popup",children:[n(Ye,d({},Nt)),n(Ge,{}),n(xt,{}),n(ht,{}),n(lt,{})]}),n(wt,{onMount:Ct}),m("div",{className:"side_bar",children:[m("div",{className:"id_button",children:[n(he,{}),n(M,{labelText:"Get data from bungie"})]}),n(le,{}),n(oe,{}),n(M,{labelText:"Change Editor"}),n(M,{labelText:"Get updated data"}),n(M,{labelText:"Add / Update description"})]})]})}Y.render(n($.StrictMode,{children:n(ae,{children:n(It,{})})}),document.getElementById("app"));
