var H=Object.defineProperty,Q=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var U=(t,a,i)=>a in t?H(t,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[a]=i,l=(t,a)=>{for(var i in a||(a={}))Y.call(a,i)&&U(t,i,a[i]);if(j)for(var i of j(a))ee.call(a,i)&&U(t,i,a[i]);return t},_=(t,a)=>Q(t,X(a));import{j as B,R as F,r as v,l as y,e as C,a as te}from"./vendor.953d3f7a.js";const ne=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))e(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&e(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}};ne();function ae(t){const a=l({},t),i=e=>{for(const r in e)(e[r]===null||e[r]==="")&&delete e[r],!(!e[r]||typeof e[r]!="object")&&(i(e[r]),Object.keys(e[r]).length===0&&delete e[r]);return e};return i(a)}async function V(t){const a=e=>{const r=document.querySelector("#message");r&&(r.textContent=`${r.textContent}
${e}`.trim(),setTimeout(()=>{r.textContent=""},15e3))},i=await t.json();if(t.status!==200){const e=i.message;console.error(`Error: ${t.status} - ${e}`),a(`${e} \u{1F612}`)}else a(" \u{1F355}");return{content:typeof i.content=="string"?JSON.parse(atob(i.content)):null,sha:i.sha}}const G=localStorage.getItem("key"),K={getDescriptionClovis:"https://api.github.com/repos/Clovis-Breh/clarity-database/contents/descriptions.json",getDescriptionIce:"https://api.github.com/repos/Ice-mourne/clarity-database/contents/descriptions.json",getRateLimit:"https://api.github.com/rate_limit",putDescriptionClovis:"https://api.github.com/repos/Clovis-Breh/clarity-database/contents/descriptions.json",putDescriptionIce:"https://api.github.com/repos/Ice-mourne/clarity-database/contents/descriptions.json"};async function P(t){const a=await fetch(K[t],{method:"GET",mode:"cors",headers:{authorization:`token ${atob(G)}`,accept:"application/vnd.github.v3+json"}});return await V(a)}async function Z(t,a){const i=await fetch(K[t],{method:"PUT",mode:"cors",headers:{authorization:`token ${atob(G)}`,accept:"application/vnd.github.v3+json"},body:JSON.stringify({sha:a.sha,branch:"main",message:`Updated ${new Date().toLocaleString()}`,content:btoa(`${JSON.stringify(a.content,null,2)}
`)})});V(i)}async function re(){const t=await P("getDescriptionClovis");if(!!t.content)return t.content}async function O(t){const a=t.perkData,i=t.dataFromEditor.converted,e=t.dataFromEditor.original,r=g=>{if(!g)return;const u=l({},g),d=h=>{for(const m in h)typeof h[m]=="string"&&(h[m]=h[m].split(",").map(b=>Number(b))),typeof h[m]=="object"&&d(h[m]);return h};return d(u)},s={name:a.name,id:a.id,armorName:a.itemName,armorId:a.itemId,stats:r(a.stats),description:i.mainEditor,simpleDescription:i.secondaryEditor,editor:{mainEditor:e.mainEditor,secondaryEditor:e.secondaryEditor},lastUpdate:Date.now()},c=await P("getDescriptionClovis"),o={sha:c.sha,content:_(l({},c.content),{[t.inputData.type]:_(l({},c.content[t.inputData.type]),{[s.id]:s})})},f=ae(o);return Z("putDescriptionClovis",f),f}async function ie(t){const a=await O(t),i=await P("getDescriptionIce"),e=r=>{const s=l({},r);for(const c in r.content){const o=r.content[c];for(const f in o)o[f].editor=void 0}return s};Z("putDescriptionIce",{sha:i.sha,content:e(a).content})}async function oe(){return await(await fetch("https://raw.githubusercontent.com/Clovis-Breh/clarity-database/main/descriptions.json",{method:"GET",mode:"cors"})).json()}const n=B.exports.jsx,p=B.exports.jsxs,E=B.exports.Fragment,D=F.createContext({}),I=F.createContext({});function se({children:t}){const[a,i]=v.exports.useState({inputData:{inputId:"",type:"none",rarity:""},perkData:{id:0,name:"Fading Memory",itemId:void 0,itemName:void 0,lastUpdate:""},dataFromEditor:{converted:{mainEditor:{},secondaryEditor:{}},original:{mainEditor:"",secondaryEditor:""}},dataFromGithub:{},error:""});return v.exports.useEffect(()=>{oe().then(e=>{i(r=>_(l({},r),{dataFromGithub:e}))}),P("getRateLimit").then(console.log)},[]),n(D.Provider,{value:a,children:n(I.Provider,{value:i,children:t})})}const ce="_info_display_4rosf_1";var le={info_display:ce};function de(){const t=v.exports.useContext(D),a=t.perkData;function i(){switch(t.inputData.type){case"armorExotic":return p(E,{children:[n("label",{children:"Armor name"}),n("span",{id:"input_item_name",children:a.itemName||""}),n("label",{children:"Armor id"}),n("span",{id:"input_item_id",children:a.itemId||""}),n("label",{children:"Perk name"}),n("span",{id:"input_name",children:a.name||""}),n("label",{children:"Perk id"}),n("span",{id:"input_id",children:a.id||""})]});case"armorMods":case"weaponMods":return p(E,{children:[n("label",{children:"Mod name"}),n("span",{id:"input_item_name",children:a.name||""}),n("label",{children:"Mod id"}),n("span",{id:"input_item_id",children:a.id||""})]});default:return p(E,{children:[n("label",{children:"Perk name"}),n("span",{id:"input_item_name",children:a.name||""}),n("label",{children:"Perk id"}),n("span",{id:"input_item_id",children:a.id||""})]})}}return p("div",{className:le.info_display,children:[i(),n("label",{children:"Last update"}),n("span",{id:"input_item_id",children:t.perkData.lastUpdate})]})}const me="_selection_list_1ea9h_1";var ue={selection_list:me};function pe(){const t=v.exports.useContext(I),a=v.exports.useContext(D),i=c=>{t(o=>_(l({},o),{inputData:_(l({},o.inputData),{type:c.target.value})}))},e=c=>{t(o=>_(l({},o),{inputData:_(l({},o.inputData),{rarity:c.target.value})}))},r=()=>{var c;return Object.values(((c=a.dataFromGithub)==null?void 0:c[a.inputData.type])||{}).map(o=>n("option",{value:o.id,children:o.name},o.id))},s=c=>{var f,g;const o=(g=(f=a.dataFromGithub)==null?void 0:f[a.inputData.type])==null?void 0:g[c.target.value];!o||t(u=>{var d,h;return _(l({},u),{perkData:_(l({},u.perkData),{id:o.id,name:o.name,itemId:o.itemId,itemName:o.itemName,lastUpdate:new Date(o.lastUpdate).toLocaleString(),stats:o.stats,descriptions:{mainEditor:(d=o.editor)==null?void 0:d.mainEditor,secondaryEditor:(h=o.editor)==null?void 0:h.secondaryEditor}})})})};return p("div",{className:ue.selection_list,children:[p("select",{onChange:c=>i(c),children:[n("option",{value:"none",children:"Select description type"}),n("option",{value:"armorExotic",children:"Exotic Armor"}),n("option",{value:"armorMods",children:"Armor Mod"}),n("option",{value:"weaponExotic",children:"Exotic Weapon"}),n("option",{value:"weaponPerks",children:"Weapon Perk"}),n("option",{value:"weaponFrames",children:"Weapon Frame"}),n("option",{value:"weaponMods",children:"Weapon Mod"})]}),p("select",{onChange:c=>e(c),children:[n("option",{value:"undefined",children:"Rarity All"}),n("option",{value:"normal",children:"Rarity Normal"}),n("option",{value:"exotic",children:"Rarity Exotic"})]}),n("select",{onChange:c=>s(c),children:r()})]})}const W=async t=>new Promise((a,i)=>{fetch(`https://www.bungie.net/Platform/Destiny2/Manifest/DestinyInventoryItemDefinition/${t}`,{method:"GET",mode:"cors",headers:{"X-API-Key":"cda7b6e4fc9f49ada4fed618e11841ab"}}).then(e=>e.json()).then(e=>a(e.Response)).catch(i)});function fe(t){const a=async e=>{const r=e.sockets.socketEntries[11].singleInitialItemHash,s=await W(r);return{id:s.hash,name:s.displayProperties.name,armorId:e.hash,armorName:e.displayProperties.name,description:s.displayProperties.description}},i=e=>({id:e.hash,name:e.displayProperties.name,description:e.displayProperties.description});return W(t).then(e=>e.itemType==2?a(e):i(e)).catch(console.error)}const he="_button_r0kka_1";var ge={button:he};function M({labelText:t,fnName:a}){const i=v.exports.useContext(D),e=v.exports.useContext(I),r=!!i.perkData.id,s=i.inputData.type!="none",c=()=>{const u=[`${r?"":"Id is missing"}`,`${s?"":"Type is missing"}`].join(`
`).trim();e(_(l({},i),{error:u})),setTimeout(()=>{e(_(l({},i),{error:""}))},15e3)},o=!!(r&&s),f={addBungieData:()=>fe(i.inputData.inputId).then(u=>e(_(l({},i),{perkData:l(l({},i.perkData),u)}))),download:()=>re().then(u=>e(d=>_(l({},d),{dataFromGithub:u}))),uploadClovis:()=>o?O(i):c(),uploadIce:()=>o?ie(i):c(),doNothing:()=>{}},g=t=="Change Editor"?"toggleEditor":void 0;return n("button",{className:ge.button,onClick:f[a||"doNothing"],id:g,children:t})}const _e="_id_input_1pgx1_1";var be={id_input:_e};function ve(){const t=l({},v.exports.useContext(D)),a=v.exports.useContext(I),i=e=>(t.inputData.inputId=e.target.value,a(t));return p("div",{className:be.id_input,children:[n("span",{children:"ID:"}),n("input",{type:"number",onChange:e=>i(e)})]})}const ye="_message_mry3j_1";var ke={message:ye};function xe(){const t=v.exports.useContext(D);return n("div",{className:ke.message,id:"message",children:t.error})}const we="_stat_input_1ec5x_1",Ce="_stat_name_1ec5x_16",De="_buttons_1ec5x_21",Te="_stat_container_1ec5x_35";var N={stat_input:we,stat_name:Ce,buttons:De,stat_container:Te};function Ee(){const[t,a]=v.exports.useState({}),i=v.exports.useContext(I),e=v.exports.useContext(D),r=["range","reload","handling","stability","zoom","stow","draw"],s=(u,d)=>a(h=>{var m;return _(l({},h),{[u]:_(l({},h[u]),{[d]:!((m=h[u])==null?void 0:m[d])})})}),c=u=>{console.log(u),!u.key.match(/[0-9]|[ ,.]|Backspace|Delete|Arrow(Left|Right)/)&&(u.key.match(/[axv]|[zy]/i)&&u.ctrlKey||u.preventDefault())},o=(u,d,h,m)=>{const b=k=>{var x,$,L;return _(l({},(x=k.perkData.stats)==null?void 0:x[r[m]]),{[d]:_(l({},(L=($=k.perkData.stats)==null?void 0:$[r[m]])==null?void 0:L[d]),{[h]:u.target.value})})};i(k=>_(l({},k),{perkData:_(l({},k.perkData),{stats:_(l({},k.perkData.stats),{[r[m]]:b(k)})})}))};v.exports.useEffect(()=>{!e.perkData.stats||(a(()=>({})),Object.entries(e.perkData.stats).forEach(([u,d])=>{const h=r.indexOf(u);a(m=>_(l({},m),{[h]:{active:!!d.active,passive:!!d.passive}}))}))},[e.perkData.id]);const f=(u,d,h)=>{var b,k,x;const m=(x=(k=(b=e.perkData.stats)==null?void 0:b[u])==null?void 0:k[d])==null?void 0:x[h];return typeof m=="string"?m:m?m.join(", "):""},g=r.map((u,d)=>{var h,m;return p("div",{className:N.stat_container,children:[p("div",{className:N.buttons,children:[n("button",{onClick:()=>s(d,"active"),children:"Active"}),n("span",{className:N.stat_name,children:u}),n("button",{onClick:()=>s(d,"passive"),children:"Passive"})]}),((h=t[d])==null?void 0:h.passive)?p(E,{children:[n("div",{className:N.stat_name,children:"Passive"}),p("div",{className:N.stat_input,children:[n("span",{children:"Stat"}),n("input",{onKeyDown:c,onChange:b=>o(b,"passive","stat",d),value:f(r[d],"passive","stat")}),n("span",{children:"Multiplier"}),n("input",{onKeyDown:c,onChange:b=>o(b,"passive","multiplier",d),value:f(r[d],"passive","multiplier")})]})]}):null,((m=t[d])==null?void 0:m.active)?p(E,{children:[n("div",{className:N.stat_name,children:"Active"}),p("div",{className:N.stat_input,children:[n("span",{children:"Stat"}),n("input",{onKeyDown:c,onChange:b=>o(b,"active","stat",d),value:f(r[d],"active","stat")}),n("span",{children:"Multiplier"}),n("input",{onKeyDown:c,onChange:b=>o(b,"active","multiplier",d),value:f(r[d],"active","multiplier")})]})]}):null]},d)});return n(E,{children:n("div",{children:g})})}const Ne="_pvp_1l6kr_1",Ie="_pve_1l6kr_5",Me="_highlight_1_1l6kr_9",Se="_highlight_2_1l6kr_13",Ae="_highlight_3_1l6kr_17",Pe="_highlight_4_1l6kr_21",Re="_arc_1l6kr_25",$e="_solar_1l6kr_26",Be="_stasis_1l6kr_28",Fe="_primary_1l6kr_33",Le="_special_1l6kr_34",je="_heavy_1l6kr_35",Ue="_center_1l6kr_110",Ve="_spacer_1l6kr_114",Ge="_bold_1l6kr_118",Ke="_background_1l6kr_122",Ze="_title_1l6kr_126",Oe="_link_1l6kr_130",We="_table_1l6kr_137";var J={pvp:Ne,pve:Ie,highlight_1:Me,highlight_2:Se,highlight_3:Ae,highlight_4:Pe,arc:Re,solar:$e,void:"_void_1l6kr_27",stasis:Be,primary:Fe,special:Le,heavy:je,center:Ue,spacer:Ve,bold:Ge,background:Ke,title:Ze,link:Oe,table:We};const Je=t=>{if(t)return`${Math.round(Math.random()*1e3)}ms`},ze=t=>{if(t.linkUrl)return n("a",{href:t.linkUrl,children:t.linkText});if(t.formula||t.formulaText)return p("span",{children:[t.formulaText," ",Je(t.formula)]})},z=t=>t==null?void 0:t.split(" ").map(a=>J[a]).join(" ");function qe({description:t}){const a=(r,s)=>{var c;return n("div",{className:z(r.className),children:(c=r.lineText)==null?void 0:c.map((o,f)=>n("span",{className:z(o.className),title:o.title,children:o.text||ze(o)},f))},s)},i=(r,s)=>n("div",{className:J.table,children:r.map((c,o)=>a(c,o))},s);return n("div",{children:(r=>{if(!(!r||Object.keys(r).length===0))return r==null?void 0:r.map((s,c)=>(s==null?void 0:s.table)?i(s.table,c):a(s,c))})(t)})}const He="_notes_1hbar_1",Qe="_pencil_1hbar_7";var Xe={notes:He,pencil:Qe};function Ye(){return p("div",{className:Xe.notes,children:[n("div",{className:"fas fa-pencil-alt"}),n("div",{className:"text",children:"Add a note"})]})}var et="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAAoCAYAAACrUDmFAAAAAXNSR0IArs4c6QAABXlJREFUaEPdWu1yIjkMlGd/JnncvQUeAAh53MDPta9aUtvyMJCAuU32qFQKgsd267MlJcmV1+b4VvA1fiVdV6QUkaQf8KtIkeTf2Tp80G9ykTThjT3Jl60p+NHF+Nre379m+/xPf0jY6+IXCs4wtMuFzwbNwZZkUFUStigXkckF0QTE7bg1hMOdKMQb1uBACFySbJ9/LmJZ/OPawdmFHR/20g2TQI3UIvE37HZ51Y4/amv1sSYz1zT+mCW5MG5c4/vaPYtsn841eQZwc3orBQCqFZ7LIILKpXSagkjtWRPE3ZcP5v7RPqZFs4TdTJPd7dfvB1ONa8oewl2pAtNi9R9XiWExX4x++NHFdNf/QAjbp2auFSDMMpViMSElwXuLGMuq78PC13yqrrQgKIJUgIyWus68RbWGSLh7uRyhvgZWf+r69GZxesESYK4pRkuCo+Z2C077HUDN74C4ccnUO4BRg7srueU7glRzZZYKETsZ+pq39e6Xcsp3BBbvBGuc59xegx4GHwGQh83D9pl5HQ8a5B91ZtxfwZ5pMInEMHuP1jbHA1KpUTVcPoTtuF8fBcctR7G4n5FZGUA634M0aNprjOaSdjang+clgz2qxZgNKiRG0UijPjKra1qF9ipNC1RqfnmAU3IAkmBMS0P9diAt0RprUAEjq2kiaHHERNfQSnamVrnNOYXqBOFRDixpP5CaYvWjSgBPqWo16qhXGjEVZUSoJpTjt/A8TzsM660Ys7Uj1mNnm6Z4cgeQvjgC8J6g9Khn1Hq8wIT5I8b1GnRf+GsB1uDWirf/lwaPh1rTWKeBQcYdktFsRIMsuRIijUxSchb5IbJ7+tWXZriMVi/B+UVk99yvu8V8V6e3MqGVUEu+mYk+wgfXmuRRjUxSSjYASeR1Fh1XClAke9uA6PcDHJg+qMFNrTQ93gdXIL0lK4tBueWdJ9nPNPPr/VAmgQAgCPRvrJDevtyvQQi3mYk3TuZ5ECt2F6jVZ8xF67NS5LeI/EioYkyT+9nF1++vRbWrhgxNWpE9UsVAuFqvh35fTfRKw/01losOJXm3C0ehZwNtzn1wc3y1liQ7cXDFLLIfYDItt7YejXJRBhcmx5EgA0fX4MFEj86AnDMUaNrOzUoKgHRKSPT3dxCwJ9lKUrohkmhSjVVdZv+fMlEtPN3J/eJLDMVcw5ZCGOR3I1SNPlgVBrOPB5Ekj5toMtO7QtW0pFJ/Me2ZP475oAF0ssaOX9VgcM0RgMZtq6VoTgKQ+Z61VCI4b1WOnE0NIgMzFXZBhtFnzA/6Go9he+7XIARKG11z5JAjja6V93Urycf+QG19UHJwSPt+R2c1zxmFmsxCl4DBzZyQ3HG0mghYOLdoJuXFZxHZvSwPMj4TZL5yTavoW85TE9UIps4uUnTkJTJCmb4CJCxHa1BP6Bw3pI37AnmoTZDgG9NQ8fknQa5O4LWYNVrmqbMSfMZFzOFbk8gAWpAf8cc/AVLBMYnTlz2mILCF4curVsPZc5d+k1AVf+Phi2su5lHPrLXt0tVokAanllOcvao6vfRhKnUN19lcGLHVmMipm/t87JfwIp2WQc69YaUmlL0D4ZGY3MF5j02Y2V0K+TSmmg4gzVXrXyRojnh9IGr3rFyhTnGNXCfJPrUl1yZmHWdXu6cM+9l+azKQKMezKAZvJuEimI8r5+V/Cdh953n0DKCC9N5mHNArVmy6KFU7JDIIFgnYLwJsWnAi5zf4nBCMIRlNsWhPq8A5S/+MsAiwB5m9IJ08H8f/qyDbZOuhzkx9MmySvxXgNSE0swxgr3DYiwAV5OlQsrbfWPxYCiFLsc6qU3SPYHo5j2K1mHBj1jgdJH+rlo0/u4l7SwLHXeOv/wLWRuBwVZFjtwAAAABJRU5ErkJggg==";const tt="_header_abt89_1",nt="_name_abt89_10",at="_bottom_abt89_19",rt="_left_abt89_25",it="_right_abt89_32",ot="_type_abt89_38",st="_ammo_abt89_43",ct="_breaker_abt89_49",lt="_element_abt89_55",dt="_power_abt89_60";var w={header:tt,name:nt,bottom:at,left:rt,right:it,type:ot,ammo:st,breaker:ct,element:lt,power:dt};function mt(t){var e;const a=p("div",{className:w.left,children:[n("div",{className:w.type,children:"Shadow Rifle"}),t.ammo.img?n("img",{className:w.ammo,src:et}):null,t.breaker.img?n("img",{className:w.breaker,src:t.breaker.img}):null]}),i=p("div",{className:w.right,children:[((e=t.element)==null?void 0:e.img)?n("img",{className:w.element,src:t.element.img}):null,n("div",{className:w.power,children:t.power})]});return p("div",{className:w.header,children:[n("a",{className:w.name,children:t.name}),p("div",{className:w.bottom,children:[a,i]})]})}const ut="_perk_box_z1cvm_1",pt="_perk_list_z1cvm_9",ft="_perk_z1cvm_1",ht="_perk_active_z1cvm_28",gt="_icon_container_z1cvm_32",_t="_icon_container_active_z1cvm_45",bt="_name_z1cvm_49",vt="_name_active_z1cvm_55",yt="_description_z1cvm_59";var T={perk_box:ut,perk_list:pt,perk:ft,perk_active:ht,icon_container:gt,icon_container_active:_t,name:bt,name_active:vt,description:yt};function kt(){const t=v.exports.useContext(D),a=[];for(let i=0;i<4;i++){const e=i==0?t==null?void 0:t.dataFromEditor.converted.mainEditor:i==1?t==null?void 0:t.dataFromEditor.converted.secondaryEditor:null;a.push(p("div",{className:T.perk_list,children:[e?n("div",{className:T.description,children:n(qe,{description:e})}):null,p("div",{className:`${T.perk} ${T.perk_active}`,children:[n("div",{className:`${T.icon_container} ${T.icon_container_active}`,children:n("img",{src:"https://bungie.net/common/destiny2_content/icons/f2ff6ea4498ad2d808b4af21e93cf5fe.png"})}),n("div",{className:`${T.name} ${T.name_active}`,children:t==null?void 0:t.perkData.name})]})]},i))}return n("div",{className:T.perk_box,children:a})}const xt="_item_sockets_1hqtd_1",wt="_frame_img_1hqtd_9",Ct="_sockets_1hqtd_16",Dt="_frame_info_1hqtd_32",Tt="_masterwork_img_1hqtd_44";var S={item_sockets:xt,frame_img:wt,sockets:Ct,frame_info:Dt,masterwork_img:Tt};function Et(){return p("div",{className:S.item_sockets,children:[n("img",{className:S.frame_img,src:"https://www.bungie.net/common/destiny2_content/icons/0ce2f3a9046c3b1e2fc007d903563e66.png"}),p("div",{className:S.frame_info,children:[n("div",{children:"Shadow Frame"}),n("div",{children:"420 rpm / 69 impact"})]}),p("div",{className:S.sockets,children:[n("div",{children:n("img",{src:"https://www.bungie.net/common/destiny2_content/icons/aeacc06cbe147ec400a10225a4dcd504.png"})}),n("div",{children:n("img",{src:"https://www.bungie.net/common/destiny2_content/icons/4e3573080845b4ee9efcb000d4924cb0.jpg"})}),p("div",{className:S.masterwork_img,children:[n("img",{src:"https://www.bungie.net/common/destiny2_content/icons/8ebd558417d6c02e3ed2ffadc4bdbc48.jpg"}),n("img",{src:"https://www.bungie.net/common/destiny2_content/icons/5c935649e5d3e72c967d6b20c3e44e85.png"})]})]})]})}function Nt(t){const a=t.recoilStat,i=1+Math.cos((-20-a*.6)*Math.PI/180),e=1+Math.sin((-20-a*.6)*Math.PI/180),r=2-i,s=Math.sin((5+a)*Math.PI/10)*(100-a);return p("svg",{height:"12",viewBox:"0 0 2 1",children:[n("circle",{r:"1",cx:"1",cy:"1",fill:"rgba(24, 30, 37, 1)"}),n("path",{style:{transform:`rotate(${s*.8}deg)`,transformOrigin:"50% 100%"},d:`M 1 1 L ${r} ${e} A 1 1 0 0 1 ${i} ${e} Z`,fill:"#FFF"})]})}const It="_stats_vihyy_1",Mt="_name_vihyy_14",St="_value_vihyy_20",At="_barr_vihyy_26";var R={stats:It,name:Mt,value:St,barr:At};function Pt(t){switch(t){case"Auto Rifle":case"Hand Cannon":case"Pulse Rifle":case"Scout Rifle":case"Shotgun":case"Sniper Rifle":case"Submachine Gun":case"Machine Gun":return[4284893193,4043523819,1240592695,155624089,943549884,4188031367,1345609583,3555269338,2715839340,3871231066];case"Fusion Rifle":case"Linear Fusion Rifle":return[2961396640,4043523819,1240592695,155624089,943549884,4188031367,1345609583,3555269338,2715839340,3871231066];case"Rocket Launcher":case"Grenade Launcher":return[3611281802,2523465841,155624089,943549884,4188031367,1345609583,3555269338,2715839340,3871231066];case"Combat Bow":return[447667954,4043523819,1591432999,1556424089,943549884,4188031367,1345609583,3555269338,2715839340,1931675084];case"Sword":return[2837207746,4043523819,2762071195,209426660,3022301683,3736848092,925767036]}}const A={perks:{155624089:29.8,943549884:55,1240592695:79.3,1345609583:52,2715839340:86,3555269338:20,3871231066:31.6,4043523819:33,4188031367:44.2,4284893193:360},all:{155624089:30,943549884:55,1240592695:79,1345609583:52,2715839340:86,3555269338:20,3871231066:32,4043523819:33,4188031367:45,4284893193:360},mod:{155624089:0,943549884:0,1240592695:0,1345609583:0,2715839340:0,3555269338:0,3871231066:0,4043523819:0,4188031367:0,4284893193:0},masterwork:{155624089:0,943549884:0,1240592695:0,1345609583:0,2715839340:0,3555269338:0,3871231066:0,4043523819:0,4188031367:.8999999999999986,4284893193:0}};function Rt(){const t={4284893193:{statBarPlace:null,name:"Rounds Per Minute"},447667954:{statBarPlace:"ms",name:"Draw Time"},2961396640:{statBarPlace:"ms",name:"Charge Time"},2837207746:{statBarPlace:"stat_bar",name:"Swing Speed"},4043523819:{statBarPlace:"stat_bar",name:"Impact"},3614673599:{statBarPlace:"stat_bar",name:"Blast Radius"},1591432999:{statBarPlace:"stat_bar",name:"Accuracy"},2523465841:{statBarPlace:"stat_bar",name:"Velocity"},2762071195:{statBarPlace:"stat_bar",name:"Guard Efficiency"},209426660:{statBarPlace:"stat_bar",name:"Guard Resistance"},1240592695:{statBarPlace:"stat_bar",name:"Range"},155624089:{statBarPlace:"stat_bar",name:"Stability"},943549884:{statBarPlace:"stat_bar",name:"Handling"},4188031367:{statBarPlace:"stat_bar",name:"Reload Speed"},1345609583:{statBarPlace:"stat_bar",name:"Aim Assistance"},3555269338:{statBarPlace:"stat_bar",name:"Zoom"},2715839340:{statBarPlace:"stat_svg",name:"Recoil Direction"},3022301683:{statBarPlace:"stat_bar",name:"Charge Rate"},3736848092:{statBarPlace:"stat_bar",name:"Guard Endurance"},3871231066:{statBarPlace:null,name:"Magazine"},1931675084:{statBarPlace:null,name:"Inventory Size"},925767036:{statBarPlace:null,name:"Ammo Capacity"}},a=Pt("Auto Rifle"),i=[];return a==null||a.forEach((e,r)=>{const s=t[e];switch(i.push(n("div",{className:R.name,children:s.name},`${r}a`)),i.push(n("div",{className:R.value,children:A.all[e]},`${r}b`)),s.statBarPlace){case"stat_bar":const c=A.perks[e],o=A.mod[e],f=A.masterwork[e];i.push(p("div",{className:R.barr,children:[c?n("div",{style:{width:`${c}%`}}):null,o?n("div",{style:{width:`${o}%`}}):null,f?n("div",{style:{width:`${f}%`}}):null]},`${r}c`));break;case"stat_svg":i.push(n(Nt,{recoilStat:A.perks[e]},r+30));break;case"stat_letter":i.push(p("div",{children:[" ",s.statBarPlace]},`${r}g`))}}),p("div",{className:R.stats,children:[i,"add in game stats"]})}const $t=t=>t.replace(/\r/g,"").split(/(< table (?:formula )?>[^]*?<\$>)/g).flatMap(a=>{if(!a)return[];const i=a.startsWith(`
`)?a.slice(1):a;return i.endsWith(`
`)?i.slice(0,-1):i}),Bt=t=>t.map(a=>a.startsWith("< table ")?{tableLines:a.split(/\n/)}:{lines:a.split(/\n/)}),Ft=t=>{const a=r=>r.map(s=>{var g;const c=new RegExp(/(<center\/>)|(<bold\/>)|(<background\/>)/g),o=(g=s.match(c))==null?void 0:g.join(" ").replace(/<|\/>/g,""),f=s.replace(c,"");return{lineText:f===""?void 0:f,className:f==""?"spacer":o}}),i=r=>{const s=!!r[0].match(/formula/);return{table:r.flatMap(o=>o.match(/(< table (?:formula )?>|<\$>)/)?[]:a([o])),className:"table",formula:s}},e=[];return t.forEach(r=>{r.lines&&a(r.lines).forEach(s=>e.push(s)),r.tableLines&&e.push(i(r.tableLines))}),e},Lt=t=>t.map(a=>{if(!a.table)return a;const i=a.table.map(e=>{var c;const r="(\\|)(?!.*\\|).*",s="\\|?.*?(?=\\|)";return _(l({},e),{lineText:(c=e.lineText)==null?void 0:c.match(new RegExp(`(${r})|(${s})`,"g"))})});return _(l({},a),{table:i})}),jt=t=>{const a=e=>{const r=[e.startsWith("|")?"(\\||\\|b)\\s*<(?:bold":"<(?:bold","highlight_[1-4]","pve|pvp","link|title|formula","stasis|arc|solar|void","primary|special|heavy","background|center)"].join("|"),s="/>";return e.split(new RegExp(`(${r}.*?${s})`,"g")).flatMap(o=>{var m,b,k;if(o.trim()==="")return[];if(!o.match(/^(<|\|)/))return{text:o};const f=o.includes("<formula");let g=((m=o.match(new RegExp(r,"g")))==null?void 0:m.join(" ").replaceAll("<",""))||"",u=o.replace(new RegExp(`${r}|${s}`,"g"),"");o.startsWith("|")&&(g=`${g} ${o.startsWith("|b")?"bold":""}`.trim(),u=u.replace(/\|b|\|/g,"").trim());const d=o.match(/(https:.+? )|((?<=https:.+? ).*(?=\/>))/g);if(d)return{linkUrl:(b=d==null?void 0:d[0])==null?void 0:b.trim(),linkText:d==null?void 0:d[1].trim(),className:g};const h=o.match(/\[.*\]/g);if(h)return{title:h[0].replace(/[[\]]/g,""),text:u.replace(/\[.*\]/g,"").trim(),className:g};if(f){const x=(k=u.match(/(ready|stow|range|reload)_\d+/g))==null?void 0:k[0];return{formulaText:u.replace(x||"","").trim(),formula:x==null?void 0:x.trim(),className:g}}return!u.trim()&&!g.trim()?[]:{text:u,className:g}})},i=e=>e.map(r=>{var c;const s=(c=r.lineText)==null?void 0:c.flatMap(o=>a(o));return _(l({},r),{lineText:s})});return t.map(e=>e.table?_(l({},e),{table:i(e.table)}):e.lineText?_(l({},e),{lineText:a(e.lineText)}):e)};function q(t){const a=$t(t),i=Bt(a),e=Ft(i),r=Lt(e);return jt(r)}function Ut({onMount:t}){const a=v.exports.useContext(I),i=v.exports.useContext(D),[e,r]=v.exports.useState(null),[s,c]=v.exports.useState(!1);return v.exports.useEffect(()=>{var f,g,u,d;if(!e){r(t()),c(!0);return}const o=h=>{const m={normal:{main:e.normal.main.getValue(),secondary:e.normal.secondary.getValue()},diff:{main:e.diff.main.getModifiedEditor().getValue(),secondary:e.diff.secondary.getModifiedEditor().getValue()}};a(b=>_(l({},b),{dataFromEditor:{converted:{mainEditor:q(m.normal.main),secondaryEditor:q(m.normal.secondary)},original:{mainEditor:m.normal.main,secondaryEditor:m.normal.secondary}}})),h==="normal"&&(m.normal.main!=m.diff.main&&e.diff.main.getModifiedEditor().setValue(m.normal.main),m.normal.secondary!=m.diff.secondary&&e.diff.secondary.getModifiedEditor().setValue(m.normal.secondary)),h==="diff"&&(m.normal.main!=m.diff.main&&e.normal.main.setValue(m.diff.main),m.normal.secondary!=m.diff.secondary&&e.normal.secondary.setValue(m.diff.secondary))};(f=e.normal.main.getModel())==null||f.onDidChangeContent(()=>o("normal")),(g=e.normal.secondary.getModel())==null||g.onDidChangeContent(()=>o("normal")),(u=e.diff.main.getModifiedEditor().getModel())==null||u.onDidChangeContent(()=>o("diff")),(d=e.diff.secondary.getModifiedEditor().getModel())==null||d.onDidChangeContent(()=>o("diff"))},[s]),v.exports.useEffect(()=>{var h,m,b;if(!e)return;const o=i.inputData.type,f=i.perkData.id,g=(h=i.dataFromGithub)==null?void 0:h[o][f],u=((m=g==null?void 0:g.editor)==null?void 0:m.mainEditor)||"",d=((b=g==null?void 0:g.editor)==null?void 0:b.secondaryEditor)||"";e.normal.main.setValue(u),e.diff.main.getModifiedEditor().setValue(u),e.diff.main.getOriginalEditor().setValue(u),e.normal.secondary.setValue(d),e.diff.secondary.getModifiedEditor().setValue(d),e.diff.secondary.getOriginalEditor().setValue(d)},[i.perkData.id]),p("div",{className:"editor-container",children:[n("div",{id:"editor-1"}),n("div",{id:"editor-2"}),n("div",{id:"diffEditor-1",className:"hidden"}),n("div",{id:"diffEditor-2",className:"hidden"})]})}function Vt(){var c;y.register({id:"clarityLangue"}),y.setMonarchTokensProvider("clarityLangue",{tokenizer:{root:[[/< table >/,"table","@table"],[/<(stasis|arc|solar|void|primary|special|heavy|background|center)/,"selfContained","@selfContained"],[/<(highlight_[1-4]|pve|pvp|bold)/,"highlight","@highlight"],[/<(formula|link)/,"extra","@extra"],[/<title /,"title","@title"]],table:[[/<\$>/,"tableEnd","@pop"],[/\|b|\|/,"tableSeparator"],[/<(stasis|arc|void|solar|background|center)/,"selfContained","@selfContained"],[/<(highlight_[1-4]|bold|primary|special|heavy|pve|pvp)/,"highlight","@highlight"],[/<(formula|link)/,"extra","@extra"]],selfContained:[[/\/>/,"selfContained","@pop"],[/./,"selfContained.text"]],highlight:[[/\/>/,"highlight","@pop"],[/./,"highlight.text"]],extra:[[/\/>/,"extra","@pop"],[/(ready|stow|range|reload)_\d+/,"extra.content"],[/https:.+? /,"extra.content"],[/./,"extra.text"]],title:[[/\/>/,"title","@pop"],[/\[.*\]/,"title.text"]]}}),C.defineTheme("myCoolTheme",{base:"vs",inherit:!1,rules:[{token:"table",foreground:"4fc1ff"},{token:"tableSeparator",foreground:"4fc1ff"},{token:"tableEnd",foreground:"4fc1ff"},{token:"selfContained",foreground:"9cdcfe"},{token:"selfContained.text",foreground:"d16969"},{token:"highlight",foreground:"4fc1ff"},{token:"highlight.text",foreground:"ffffff"},{token:"extra",foreground:"4ec9b0"},{token:"extra.text",foreground:"ffffff"},{token:"extra.content",foreground:"4fc1ff"},{token:"bold.selfContained",foreground:"9cdcfe"},{token:"bold",foreground:"4fc1ff"},{token:"bold.text",foreground:"ffffff"},{token:"title",foreground:"4ec9b0"},{token:"title.text",foreground:"4fc1ff"}],colors:{"editor.foreground":"#ffffff","editor.background":"#1e1e1e","editorLineNumber.foreground":"#858585","editorLineNumber.activeForeground":"#c6c6c6","editorCursor.foreground":"#ffffff","editor.lineHighlightBorder":"#fff0","editor.selectionBackground":"#004972b8","editorSuggestWidget.background":"#252526","editorSuggestWidget.border":"#454545","list.hoverBackground":"#2a2d2e","diffEditor.removedTextBackground":"#ff000070","diffEditor.insertedTextBackground":"#a0bf5652"}}),y.registerCompletionItemProvider("clarityLangue",{provideCompletionItems:()=>{const o={kind:y.CompletionItemKind.Snippet,insertTextRules:y.CompletionItemInsertTextRule.InsertAsSnippet};return{suggestions:[l({label:"table",insertText:["< table > ","$0","<$>"].join(`
`)},o),{label:"background",kind:y.CompletionItemKind.Text,insertText:"<background/>"},{label:"center",kind:y.CompletionItemKind.Text,insertText:"<center/>"},{label:"bold line",kind:y.CompletionItemKind.Text,insertText:"<bold/>"},{label:"stasis",kind:y.CompletionItemKind.Text,insertText:"<stasis/>"},{label:"arc",kind:y.CompletionItemKind.Text,insertText:"<arc/>"},{label:"void",kind:y.CompletionItemKind.Text,insertText:"<void/>"},{label:"solar",kind:y.CompletionItemKind.Text,insertText:"<solar/>"},{label:"primary",kind:y.CompletionItemKind.Text,insertText:"<primary/>"},{label:"special",kind:y.CompletionItemKind.Text,insertText:"<special/>"},{label:"heavy",kind:y.CompletionItemKind.Text,insertText:"<heavy/>"},l({label:"highlight",insertText:"<highlight_${1:1} ${2: } />"},o),l({label:"bold text",insertText:"<bold ${1: } />"},o),l({label:"pve",insertText:"<pve ${1: } />"},o),l({label:"pvp",insertText:"<pvp ${1: } />"},o),l({label:"link",insertText:"<link ${1: } ${2: }>"},o),l({label:"combatant",insertText:"<link https://d2clarity.page.link/combatant ${1:Combatant}/>"},o),l({label:"formula_ready",insertText:"<formula ${2:Ready Speed:} ready_${1:0} />"},o),l({label:"formula_stow",insertText:"<formula ${2:Stow Speed:} stow_${1:0} />"},o),l({label:"formula_range",insertText:"<formula ${2:In_Game Range:} range_${1:0} />"},o),l({label:"formula_reload",insertText:"<formula ${2:Reload Time:} reload_${1:0} />"},o),l({label:"formula_ready_empty",insertText:"<formula ready_${1:0} />"},o),l({label:"formula_stow_empty",insertText:"<formula stow_${1:0} />"},o),l({label:"formula_range_empty",insertText:"<formula range_${1:0} />"},o),l({label:"formula_reload_empty",insertText:"<formula reload_${1:0} />"},o),l({label:"title",insertText:"<title ${1: } [${1: }] />"},o)]}}});const t={theme:"myCoolTheme",language:"clarityLangue",minimap:{enabled:!1},automaticLayout:!0,wordWrap:"on",mouseWheelZoom:!0},a=_(l({},t),{lineNumbersMinChars:2,lineDecorationsWidth:0}),i=_(l({},t),{lineNumbersMinChars:3,lineDecorationsWidth:15,renderOverviewRuler:!1,renderIndicators:!1}),e={normal:{main:document.querySelector("#editor-1"),secondary:document.querySelector("#editor-2")},diff:{main:document.querySelector("#diffEditor-1"),secondary:document.querySelector("#diffEditor-2")}},r={main:{original:C.createModel("","clarityLangue"),modified:C.createModel("","clarityLangue")},secondary:{original:C.createModel("","clarityLangue"),modified:C.createModel("","clarityLangue")}},s={normal:{main:C.create(e.normal.main,a),secondary:C.create(e.normal.secondary,a)},diff:{main:C.createDiffEditor(e.diff.main,i),secondary:C.createDiffEditor(e.diff.secondary,i)}};return s.diff.main.setModel({modified:r.main.modified,original:r.main.original}),s.diff.secondary.setModel({modified:r.secondary.modified,original:r.secondary.original}),(c=document.querySelector("#toggleEditor"))==null||c.addEventListener("click",()=>{const o=e.normal,f=e.diff;o.main.classList.toggle("hidden"),o.secondary.classList.toggle("hidden"),f.main.classList.toggle("hidden"),f.secondary.classList.toggle("hidden")}),l({},s)}const Gt={ammo:{img:"https://bungie.net/common/destiny2_content/icons/b6d3805ca8400272b7ee7935b0b75c79.png",type:"special"},breaker:{img:"https://www.bungie.net/common/destiny2_content/icons/DestinyBreakerTypeDefinition_825a438c85404efd6472ff9e97fc7251.png",type:"special"},element:{img:"https://www.bungie.net/common/destiny2_content/icons/DestinyDamageTypeDefinition_530c4c3e7981dc2aefd24fd3293482bf.png",type:"special"},power:69420,name:"FADING SHADOW'S BURDEN"};function Kt(){return p(E,{children:[p("div",{className:"item_popup",children:[n(mt,l({},Gt)),n(Ye,{}),n(Rt,{}),n(Et,{}),n(kt,{})]}),n(Ut,{onMount:Vt}),p("div",{className:"side_bar",children:[p("div",{className:"id_button",children:[n(ve,{}),n(M,{labelText:"Get data from bungie",fnName:"addBungieData"})]}),n(pe,{}),n(de,{}),n(M,{labelText:"Change Editor"}),n(M,{labelText:"Get updated data",fnName:"download"}),n(Ee,{}),n(M,{labelText:"Add / Update - Database",fnName:"uploadClovis"}),n(M,{labelText:"Add / Update - Live database",fnName:"uploadIce"}),n(xe,{})]})]})}te.render(n(F.StrictMode,{children:n(se,{children:n(Kt,{})})}),document.getElementById("app"));
