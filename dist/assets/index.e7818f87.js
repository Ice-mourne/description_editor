var X=Object.defineProperty,Y=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var G=(n,a,r)=>a in n?X(n,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[a]=r,l=(n,a)=>{for(var r in a||(a={}))te.call(a,r)&&G(n,r,a[r]);if(V)for(var r of V(a))ne.call(a,r)&&G(n,r,a[r]);return n},h=(n,a)=>Y(n,ee(a));import{j,R as L,r as b,l as x,e as N,a as ae}from"./vendor.953d3f7a.js";const ie=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))e(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&e(c)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}};ie();function O(n){const a=l({},n),r=e=>{for(const i in e)(e[i]===null||e[i]==="")&&delete e[i],!(!e[i]||typeof e[i]!="object")&&(r(e[i]),Object.keys(e[i]).length===0&&delete e[i]);return e};return r(a)}async function W(n){const a=e=>{const i=document.querySelector("#message");i&&(i.textContent=`${i.textContent}
${e}`.trim(),setTimeout(()=>{i.textContent=""},15e3))},r=await n.json();if(n.status!==200){const e=r.message;console.error(`Error: ${n.status} - ${e}`),a(`${e} \u{1F612}`)}else a(" \u{1F355}");return{content:typeof r.content=="string"?JSON.parse(atob(r.content)):null,sha:r.sha}}const F=JSON.parse(localStorage.getItem("login")||"{}"),K={getDescriptionClovis:"https://api.github.com/repos/Clovis-Breh/clarity-database/contents/descriptions.json",getDescriptionIce:"https://api.github.com/repos/Ice-mourne/clarity-database/contents/descriptions.json",getRateLimit:"https://api.github.com/rate_limit",putDescriptionClovis:"https://api.github.com/repos/Clovis-Breh/clarity-database/contents/descriptions.json",putDescriptionIce:"https://api.github.com/repos/Ice-mourne/clarity-database/contents/descriptions.json"};async function $(n){if(!F.key)return;const a=await fetch(K[n],{method:"GET",mode:"cors",headers:{authorization:`token ${atob(F.key)}`,accept:"application/vnd.github.v3+json"}});return await W(a)}async function Z(n,a){const r=await fetch(K[n],{method:"PUT",mode:"cors",headers:{authorization:`token ${atob(F.key)}`,accept:"application/vnd.github.v3+json"},body:JSON.stringify({sha:a.sha,branch:"main",message:`Updated ${new Date().toLocaleString()}`,content:btoa(`${a.content}
`)})});W(r)}async function re(){const n=await $("getDescriptionClovis");if(!!(n==null?void 0:n.content))return n.content}async function J(n){const a=n.ItemData,r=n.dataFromEditor.converted,e=n.dataFromEditor.original,i=u=>{if(!u)return;const y=l({},u),g=m=>{for(const d in m)typeof m[d]=="string"&&(m[d]=m[d].split(",").map(f=>Number(f))),typeof m[d]=="object"&&g(m[d]);return m};return g(y)},s=h(l({},a),{type:n.inputData.type,stats:i(a.stats),description:r.mainEditor,simpleDescription:r.secondaryEditor,lastUpdate:Date.now(),updatedBy:F.name}),c=await $("getDescriptionClovis");if(!c)return;const o=O(h(l({},c.content),{[s.id]:h(l({},s),{editor:e})}));return Z("putDescriptionClovis",{sha:c.sha,content:JSON.stringify(o,null,2)}),s}async function oe(n){const a=await J(n),r=await $("getDescriptionIce");if(!r||!a)return;const e=O(h(l({},r.content),{[a.id]:a}));Z("putDescriptionIce",{sha:r.sha,content:JSON.stringify(e)})}async function se(){return await(await fetch("https://raw.githubusercontent.com/Clovis-Breh/clarity-database/main/descriptions.json",{method:"GET",mode:"cors"})).json()}const t=j.exports.jsx,p=j.exports.jsxs,T=j.exports.Fragment,D=L.createContext({}),M=L.createContext({});function ce({children:n}){const[a,r]=b.exports.useState({inputData:{id:"",type:void 0},ItemData:{id:0,name:"",lastUpdate:""},dataFromEditor:{converted:{mainEditor:[],secondaryEditor:[]},original:{mainEditor:"",secondaryEditor:""}},dataFromGithub:{},message:""});return b.exports.useEffect(()=>{se().then(e=>{r(i=>h(l({},i),{dataFromGithub:e}))}),$("getRateLimit").then(console.log)},[]),t(D.Provider,{value:a,children:t(M.Provider,{value:r,children:n})})}const le="_info_display_4rosf_1";var de={info_display:le};function me(){const n=b.exports.useContext(D),a=n.ItemData;function r(){switch(n.inputData.type){case"armorExotic":return p(T,{children:[t("label",{children:"Armor name"}),t("span",{id:"input_item_name",children:a.itemName||""}),t("label",{children:"Armor id"}),t("span",{id:"input_item_id",children:a.itemId||""}),t("label",{children:"Perk name"}),t("span",{id:"input_name",children:a.name||""}),t("label",{children:"Perk id"}),t("span",{id:"input_id",children:a.id||""})]});case"armorMod":case"weaponMod":case"ghostMod":return p(T,{children:[t("label",{children:"Mod name"}),t("span",{id:"input_item_name",children:a.name||""}),t("label",{children:"Mod id"}),t("span",{id:"input_item_id",children:a.id||""})]});case"weaponFrameExotic":case"weaponFrame":return p(T,{children:[t("label",{children:"Frame name"}),t("span",{id:"input_item_name",children:a.name||""}),t("label",{children:"Frame id"}),t("span",{id:"input_item_id",children:a.id||""})]});case"weaponCatalystExotic":return p(T,{children:[t("label",{children:"Catalyst name"}),t("span",{id:"input_item_name",children:a.name||""}),t("label",{children:"Catalyst id"}),t("span",{id:"input_item_id",children:a.id||""})]});default:return p(T,{children:[t("label",{children:"Perk name"}),t("span",{id:"input_item_name",children:a.name||""}),t("label",{children:"Perk id"}),t("span",{id:"input_item_id",children:a.id||""})]})}}return p("div",{className:de.info_display,children:[r(),t("label",{children:"Last update"}),t("span",{id:"input_item_id",children:n.ItemData.lastUpdate})]})}const ue="_selection_list_1ygau_1";var pe={selection_list:ue};function fe(){const n=b.exports.useContext(M),a=b.exports.useContext(D),r=s=>{n(c=>h(l({},c),{inputData:h(l({},c.inputData),{type:s.target.value})}))},e=()=>a.dataFromGithub?Object.values(a.dataFromGithub).flatMap(o=>o.type===a.inputData.type?o:[]).sort((o,u)=>o.itemName&&u.itemName?o.itemName.localeCompare(u.itemName):o.name.localeCompare(u.name)).map((o,u)=>t("option",{value:o.id,children:o.itemName||o.name},u)):void 0,i=s=>{var o;const c=(o=a.dataFromGithub)==null?void 0:o[s.target.value];!c||n(u=>h(l({},u),{ItemData:{id:c.id,name:c.name,itemId:c.itemId,itemName:c.itemName,lastUpdate:new Date(c.lastUpdate).toLocaleString(),stats:c.stats},dataFromEditor:{converted:{mainEditor:c.description,secondaryEditor:c.simpleDescription},original:c.editor}}))};return p("div",{className:pe.selection_list,children:[p("select",{onChange:s=>r(s),children:[t("option",{children:"Select description type"}),p("optgroup",{label:"Armor",children:[t("option",{value:"armorExotic",children:"Exotic Armor"}),t("option",{value:"armorMod",children:"Armor Mod"})]}),p("optgroup",{label:"Exotic Weapon",children:[t("option",{value:"weaponPerkExotic",children:"Exotic Weapon Perk"}),t("option",{value:"weaponFrameExotic",children:"Exotic Weapon Frame"}),t("option",{value:"weaponCatalystExotic",children:"Exotic Weapon catalyst"})]}),p("optgroup",{label:"Exotic Weapon",children:[t("option",{value:"weaponPerk",children:"Weapon Perk"}),t("option",{value:"weaponPerkEnhanced",children:"Weapon Perk Enhanced"})]}),p("optgroup",{label:"Weapon",children:[t("option",{value:"weaponFrame",children:"Weapon Frame"}),t("option",{value:"weaponMod",children:"Weapon Mod"})]}),t("optgroup",{label:"Other",children:t("option",{value:"ghostMod",children:"Ghost Mod"})})]}),t("select",{onChange:s=>i(s),children:e()})]})}const z=async n=>new Promise((a,r)=>{fetch(`https://www.bungie.net/Platform/Destiny2/Manifest/DestinyInventoryItemDefinition/${n}`,{method:"GET",mode:"cors",headers:{"X-API-Key":"cda7b6e4fc9f49ada4fed618e11841ab"}}).then(e=>e.json()).then(e=>a(e.Response)).catch(r)});function he(n){const a=async e=>{const i=e.sockets.socketEntries[11].singleInitialItemHash,s=await z(i);return{id:s.hash,name:s.displayProperties.name,itemId:e.hash,itemName:e.displayProperties.name,lastUpdate:"Never"}},r=e=>({id:e.hash,name:e.displayProperties.name,lastUpdate:"Never"});return z(n).then(e=>e.itemType==2?a(e):r(e)).catch(console.error)}const ge="_button_r0kka_1";var _e={button:ge};function S({labelText:n,fnName:a}){const r=b.exports.useContext(D),e=b.exports.useContext(M),i=!!r.ItemData.id,s=!!r.inputData.type,c=!!localStorage.getItem("login"),o=()=>{const m=[`${i?"":"Id is missing"}`,`${s?"":"Type is missing"}`,`${c?"":"Login to upload"}`].join(`
`).trim();e(h(l({},r),{message:m})),setTimeout(()=>{e(h(l({},r),{message:""}))},15e3)},u=!!(i&&s&&c),y={addBungieData:()=>he(r.inputData.id).then(m=>e(h(l({},r),{ItemData:l(l({},r.ItemData),m)}))),download:()=>re().then(m=>e(d=>h(l({},d),{dataFromGithub:m}))),uploadClovis:()=>u?J(r):o(),uploadIce:()=>u?oe(r):o(),doNothing:()=>{}},g=n=="Change Editor"?"toggleEditor":void 0;return t("button",{className:_e.button,onClick:y[a||"doNothing"],id:g,children:n})}const be="_id_input_1pgx1_1";var ve={id_input:be};function ye(){const n=l({},b.exports.useContext(D)),a=b.exports.useContext(M),r=e=>(n.inputData.id=e.target.value,a(n));return p("div",{className:ve.id_input,children:[t("span",{children:"ID:"}),t("input",{type:"number",onChange:e=>r(e)})]})}const ke="_message_mry3j_1";var xe={message:ke};function we(){const n=b.exports.useContext(D);return t("div",{className:xe.message,id:"message",children:n.message})}const Ce="_stat_input_c86co_1",Ie="_stat_name_c86co_16",Ne="_buttons_c86co_21",Te="_stat_container_c86co_34",De="_active_button_c86co_38",Ee="_default_button_c86co_42";var w={stat_input:Ce,stat_name:Ie,buttons:Ne,stat_container:Te,active_button:De,default_button:Ee};function Me(){const[n,a]=b.exports.useState({}),r=b.exports.useContext(M),e=b.exports.useContext(D),i=["range","reload","handling","stability","zoom","aimAssist","chargeDraw","stow","draw","damage"],s=(m,d)=>a(f=>{var _;return h(l({},f),{[m]:h(l({},f[m]),{[d]:!((_=f[m])==null?void 0:_[d])})})}),c=m=>{console.log(m),!m.key.match(/[0-9]|[ ,.]|Backspace|Delete|Arrow(Left|Right)/)&&(m.key.match(/[axv]|[zy]/i)&&m.ctrlKey||m.preventDefault())},o=(m,d,f,_)=>{const C=k=>{var v,B,U;return h(l({},(v=k.ItemData.stats)==null?void 0:v[i[_]]),{[d]:h(l({},(U=(B=k.ItemData.stats)==null?void 0:B[i[_]])==null?void 0:U[d]),{[f]:m.target.value})})};r(k=>h(l({},k),{ItemData:h(l({},k.ItemData),{stats:h(l({},k.ItemData.stats),{[i[_]]:C(k)})})}))};b.exports.useEffect(()=>{a(()=>({})),!!e.ItemData.stats&&Object.entries(e.ItemData.stats).forEach(([m,d])=>{const f=i.indexOf(m);a(_=>h(l({},_),{[f]:{active:!!d.active,passive:!!d.passive}}))})},[e.ItemData.id]);const u=(m,d,f)=>{var C,k,v;const _=(v=(k=(C=e.ItemData.stats)==null?void 0:C[m])==null?void 0:k[d])==null?void 0:v[f];return typeof _=="string"?_:_?_.join(", "):""},y=m=>{var d;return(d=m.match(/([A-Z][a-z]+)|([a-z]+)/g))==null?void 0:d.join(" ")},g=i.map((m,d)=>{var f,_,C,k;return p("div",{className:w.stat_container,children:[p("div",{className:w.buttons,children:[t("button",{onClick:()=>s(d,"active"),className:((f=n[d])==null?void 0:f.active)?w.active_button:w.default_button,children:"Active"}),t("span",{className:w.stat_name,children:y(m)}),t("button",{onClick:()=>s(d,"passive"),className:((_=n[d])==null?void 0:_.passive)?w.active_button:w.default_button,children:"Passive"})]}),((C=n[d])==null?void 0:C.active)?p(T,{children:[t("div",{className:w.stat_name,children:"Active"}),p("div",{className:w.stat_input,children:[t("span",{children:"Stat"}),t("input",{onKeyDown:c,onChange:v=>o(v,"active","stat",d),value:u(i[d],"active","stat")}),t("span",{children:"Multiplier"}),t("input",{onKeyDown:c,onChange:v=>o(v,"active","multiplier",d),value:u(i[d],"active","multiplier")})]})]}):null,((k=n[d])==null?void 0:k.passive)?p(T,{children:[t("div",{className:w.stat_name,children:"Passive"}),p("div",{className:w.stat_input,children:[t("span",{children:"Stat"}),t("input",{onKeyDown:c,onChange:v=>o(v,"passive","stat",d),value:u(i[d],"passive","stat")}),t("span",{children:"Multiplier"}),t("input",{onKeyDown:c,onChange:v=>o(v,"passive","multiplier",d),value:u(i[d],"passive","multiplier")})]})]}):null]},d)});return t(T,{children:t("div",{children:g})})}const Se="_pvp_1l6kr_1",Ae="_pve_1l6kr_5",Pe="_highlight_1_1l6kr_9",Fe="_highlight_2_1l6kr_13",$e="_highlight_3_1l6kr_17",Re="_highlight_4_1l6kr_21",Be="_arc_1l6kr_25",je="_solar_1l6kr_26",Le="_stasis_1l6kr_28",Ue="_primary_1l6kr_33",Ve="_special_1l6kr_34",Ge="_heavy_1l6kr_35",Oe="_center_1l6kr_110",We="_spacer_1l6kr_114",Ke="_bold_1l6kr_118",Ze="_background_1l6kr_122",Je="_title_1l6kr_126",ze="_link_1l6kr_130",qe="_table_1l6kr_137";var q={pvp:Se,pve:Ae,highlight_1:Pe,highlight_2:Fe,highlight_3:$e,highlight_4:Re,arc:Be,solar:je,void:"_void_1l6kr_27",stasis:Le,primary:Ue,special:Ve,heavy:Ge,center:Oe,spacer:We,bold:Ke,background:Ze,title:Je,link:ze,table:qe};const He=n=>{if(n)return`${Math.round(Math.random()*1e3)}ms`},Qe=n=>{if(n.linkUrl)return t("a",{href:n.linkUrl,children:n.linkText});if(n.formula||n.formulaText)return p("span",{children:[n.formulaText," ",He(n.formula)]})},H=n=>n==null?void 0:n.split(" ").map(a=>q[a]).join(" ");function Xe({description:n}){const a=(i,s)=>{var c;return t("div",{className:H(i.className),children:(c=i.lineText)==null?void 0:c.map((o,u)=>t("span",{className:H(o.className),title:o.title,children:o.text||Qe(o)},u))},s)},r=(i,s)=>t("div",{className:q.table,children:i.map((c,o)=>a(c,o))},s);return t("div",{children:(i=>{if(!(!i||Object.keys(i).length===0))return i==null?void 0:i.map((s,c)=>(s==null?void 0:s.table)?r(s.table,c):a(s,c))})(n)})}const Ye="_notes_1hbar_1",et="_pencil_1hbar_7";var tt={notes:Ye,pencil:et};function nt(){return p("div",{className:tt.notes,children:[t("div",{className:"fas fa-pencil-alt"}),t("div",{className:"text",children:"Add a note"})]})}var at="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAAoCAYAAACrUDmFAAAAAXNSR0IArs4c6QAABXlJREFUaEPdWu1yIjkMlGd/JnncvQUeAAh53MDPta9aUtvyMJCAuU32qFQKgsd267MlJcmV1+b4VvA1fiVdV6QUkaQf8KtIkeTf2Tp80G9ykTThjT3Jl60p+NHF+Nre379m+/xPf0jY6+IXCs4wtMuFzwbNwZZkUFUStigXkckF0QTE7bg1hMOdKMQb1uBACFySbJ9/LmJZ/OPawdmFHR/20g2TQI3UIvE37HZ51Y4/amv1sSYz1zT+mCW5MG5c4/vaPYtsn841eQZwc3orBQCqFZ7LIILKpXSagkjtWRPE3ZcP5v7RPqZFs4TdTJPd7dfvB1ONa8oewl2pAtNi9R9XiWExX4x++NHFdNf/QAjbp2auFSDMMpViMSElwXuLGMuq78PC13yqrrQgKIJUgIyWus68RbWGSLh7uRyhvgZWf+r69GZxesESYK4pRkuCo+Z2C077HUDN74C4ccnUO4BRg7srueU7glRzZZYKETsZ+pq39e6Xcsp3BBbvBGuc59xegx4GHwGQh83D9pl5HQ8a5B91ZtxfwZ5pMInEMHuP1jbHA1KpUTVcPoTtuF8fBcctR7G4n5FZGUA634M0aNprjOaSdjang+clgz2qxZgNKiRG0UijPjKra1qF9ipNC1RqfnmAU3IAkmBMS0P9diAt0RprUAEjq2kiaHHERNfQSnamVrnNOYXqBOFRDixpP5CaYvWjSgBPqWo16qhXGjEVZUSoJpTjt/A8TzsM660Ys7Uj1mNnm6Z4cgeQvjgC8J6g9Khn1Hq8wIT5I8b1GnRf+GsB1uDWirf/lwaPh1rTWKeBQcYdktFsRIMsuRIijUxSchb5IbJ7+tWXZriMVi/B+UVk99yvu8V8V6e3MqGVUEu+mYk+wgfXmuRRjUxSSjYASeR1Fh1XClAke9uA6PcDHJg+qMFNrTQ93gdXIL0lK4tBueWdJ9nPNPPr/VAmgQAgCPRvrJDevtyvQQi3mYk3TuZ5ECt2F6jVZ8xF67NS5LeI/EioYkyT+9nF1++vRbWrhgxNWpE9UsVAuFqvh35fTfRKw/01losOJXm3C0ehZwNtzn1wc3y1liQ7cXDFLLIfYDItt7YejXJRBhcmx5EgA0fX4MFEj86AnDMUaNrOzUoKgHRKSPT3dxCwJ9lKUrohkmhSjVVdZv+fMlEtPN3J/eJLDMVcw5ZCGOR3I1SNPlgVBrOPB5Ekj5toMtO7QtW0pFJ/Me2ZP475oAF0ssaOX9VgcM0RgMZtq6VoTgKQ+Z61VCI4b1WOnE0NIgMzFXZBhtFnzA/6Go9he+7XIARKG11z5JAjja6V93Urycf+QG19UHJwSPt+R2c1zxmFmsxCl4DBzZyQ3HG0mghYOLdoJuXFZxHZvSwPMj4TZL5yTavoW85TE9UIps4uUnTkJTJCmb4CJCxHa1BP6Bw3pI37AnmoTZDgG9NQ8fknQa5O4LWYNVrmqbMSfMZFzOFbk8gAWpAf8cc/AVLBMYnTlz2mILCF4curVsPZc5d+k1AVf+Phi2su5lHPrLXt0tVokAanllOcvao6vfRhKnUN19lcGLHVmMipm/t87JfwIp2WQc69YaUmlL0D4ZGY3MF5j02Y2V0K+TSmmg4gzVXrXyRojnh9IGr3rFyhTnGNXCfJPrUl1yZmHWdXu6cM+9l+azKQKMezKAZvJuEimI8r5+V/Cdh953n0DKCC9N5mHNArVmy6KFU7JDIIFgnYLwJsWnAi5zf4nBCMIRlNsWhPq8A5S/+MsAiwB5m9IJ08H8f/qyDbZOuhzkx9MmySvxXgNSE0swxgr3DYiwAV5OlQsrbfWPxYCiFLsc6qU3SPYHo5j2K1mHBj1jgdJH+rlo0/u4l7SwLHXeOv/wLWRuBwVZFjtwAAAABJRU5ErkJggg==";const it="_header_abt89_1",rt="_name_abt89_10",ot="_bottom_abt89_19",st="_left_abt89_25",ct="_right_abt89_32",lt="_type_abt89_38",dt="_ammo_abt89_43",mt="_breaker_abt89_49",ut="_element_abt89_55",pt="_power_abt89_60";var I={header:it,name:rt,bottom:ot,left:st,right:ct,type:lt,ammo:dt,breaker:mt,element:ut,power:pt};function ft(n){var e;const a=p("div",{className:I.left,children:[t("div",{className:I.type,children:"Shadow Rifle"}),n.ammo.img?t("img",{className:I.ammo,src:at}):null,n.breaker.img?t("img",{className:I.breaker,src:n.breaker.img}):null]}),r=p("div",{className:I.right,children:[((e=n.element)==null?void 0:e.img)?t("img",{className:I.element,src:n.element.img}):null,t("div",{className:I.power,children:n.power})]});return p("div",{className:I.header,children:[t("a",{className:I.name,children:n.name}),p("div",{className:I.bottom,children:[a,r]})]})}const ht="_perk_box_z1cvm_1",gt="_perk_list_z1cvm_9",_t="_perk_z1cvm_1",bt="_perk_active_z1cvm_28",vt="_icon_container_z1cvm_32",yt="_icon_container_active_z1cvm_45",kt="_name_z1cvm_49",xt="_name_active_z1cvm_55",wt="_description_z1cvm_59";var E={perk_box:ht,perk_list:gt,perk:_t,perk_active:bt,icon_container:vt,icon_container_active:yt,name:kt,name_active:xt,description:wt};function Ct(){const n=b.exports.useContext(D),a=[];for(let r=0;r<4;r++){const e=r==0?n==null?void 0:n.dataFromEditor.converted.mainEditor:r==1?n==null?void 0:n.dataFromEditor.converted.secondaryEditor:null;a.push(p("div",{className:E.perk_list,children:[e?t("div",{className:E.description,children:t(Xe,{description:e})}):null,p("div",{className:`${E.perk} ${E.perk_active}`,children:[t("div",{className:`${E.icon_container} ${E.icon_container_active}`,children:t("img",{src:"https://bungie.net/common/destiny2_content/icons/f2ff6ea4498ad2d808b4af21e93cf5fe.png"})}),t("div",{className:`${E.name} ${E.name_active}`,children:n==null?void 0:n.ItemData.name})]})]},r))}return t("div",{className:E.perk_box,children:a})}const It="_item_sockets_1hqtd_1",Nt="_frame_img_1hqtd_9",Tt="_sockets_1hqtd_16",Dt="_frame_info_1hqtd_32",Et="_masterwork_img_1hqtd_44";var A={item_sockets:It,frame_img:Nt,sockets:Tt,frame_info:Dt,masterwork_img:Et};function Mt(){return p("div",{className:A.item_sockets,children:[t("img",{className:A.frame_img,src:"https://www.bungie.net/common/destiny2_content/icons/2a53b9dc2c9c90d3d8ee224d06368412.png"}),p("div",{className:A.frame_info,children:[t("div",{children:"Shadow Frame"}),t("div",{children:"420 rpm / 69 impact"})]}),p("div",{className:A.sockets,children:[t("div",{children:t("img",{src:"https://www.bungie.net/common/destiny2_content/icons/aeacc06cbe147ec400a10225a4dcd504.png"})}),t("div",{children:t("img",{src:"https://www.bungie.net/common/destiny2_content/icons/4e3573080845b4ee9efcb000d4924cb0.jpg"})}),p("div",{className:A.masterwork_img,children:[t("img",{src:"https://www.bungie.net/common/destiny2_content/icons/8ebd558417d6c02e3ed2ffadc4bdbc48.jpg"}),t("img",{src:"https://www.bungie.net/common/destiny2_content/icons/5c935649e5d3e72c967d6b20c3e44e85.png"})]})]})]})}function St(n){const a=n.recoilStat,r=1+Math.cos((-20-a*.6)*Math.PI/180),e=1+Math.sin((-20-a*.6)*Math.PI/180),i=2-r,s=Math.sin((5+a)*Math.PI/10)*(100-a);return p("svg",{height:"12",viewBox:"0 0 2 1",children:[t("circle",{r:"1",cx:"1",cy:"1",fill:"rgba(24, 30, 37, 1)"}),t("path",{style:{transform:`rotate(${s*.8}deg)`,transformOrigin:"50% 100%"},d:`M 1 1 L ${i} ${e} A 1 1 0 0 1 ${r} ${e} Z`,fill:"#FFF"})]})}const At="_stats_vihyy_1",Pt="_name_vihyy_14",Ft="_value_vihyy_20",$t="_barr_vihyy_26";var R={stats:At,name:Pt,value:Ft,barr:$t};function Rt(n){switch(n){case"Auto Rifle":case"Hand Cannon":case"Pulse Rifle":case"Scout Rifle":case"Shotgun":case"Sniper Rifle":case"Submachine Gun":case"Machine Gun":return[4284893193,4043523819,1240592695,155624089,943549884,4188031367,1345609583,3555269338,2715839340,3871231066];case"Fusion Rifle":case"Linear Fusion Rifle":return[2961396640,4043523819,1240592695,155624089,943549884,4188031367,1345609583,3555269338,2715839340,3871231066];case"Rocket Launcher":case"Grenade Launcher":return[3611281802,2523465841,155624089,943549884,4188031367,1345609583,3555269338,2715839340,3871231066];case"Combat Bow":return[447667954,4043523819,1591432999,1556424089,943549884,4188031367,1345609583,3555269338,2715839340,1931675084];case"Sword":return[2837207746,4043523819,2762071195,209426660,3022301683,3736848092,925767036]}}const P={perks:{155624089:29.8,943549884:55,1240592695:79.3,1345609583:52,2715839340:86,3555269338:20,3871231066:31.6,4043523819:33,4188031367:44.2,4284893193:360},all:{155624089:30,943549884:55,1240592695:79,1345609583:52,2715839340:86,3555269338:20,3871231066:32,4043523819:33,4188031367:45,4284893193:360},mod:{155624089:0,943549884:0,1240592695:0,1345609583:0,2715839340:0,3555269338:0,3871231066:0,4043523819:0,4188031367:0,4284893193:0},masterwork:{155624089:0,943549884:0,1240592695:0,1345609583:0,2715839340:0,3555269338:0,3871231066:0,4043523819:0,4188031367:.8999999999999986,4284893193:0}};function Bt(){const n={4284893193:{statBarPlace:null,name:"Rounds Per Minute"},447667954:{statBarPlace:"ms",name:"Draw Time"},2961396640:{statBarPlace:"ms",name:"Charge Time"},2837207746:{statBarPlace:"stat_bar",name:"Swing Speed"},4043523819:{statBarPlace:"stat_bar",name:"Impact"},3614673599:{statBarPlace:"stat_bar",name:"Blast Radius"},1591432999:{statBarPlace:"stat_bar",name:"Accuracy"},2523465841:{statBarPlace:"stat_bar",name:"Velocity"},2762071195:{statBarPlace:"stat_bar",name:"Guard Efficiency"},209426660:{statBarPlace:"stat_bar",name:"Guard Resistance"},1240592695:{statBarPlace:"stat_bar",name:"Range"},155624089:{statBarPlace:"stat_bar",name:"Stability"},943549884:{statBarPlace:"stat_bar",name:"Handling"},4188031367:{statBarPlace:"stat_bar",name:"Reload Speed"},1345609583:{statBarPlace:"stat_bar",name:"Aim Assistance"},3555269338:{statBarPlace:"stat_bar",name:"Zoom"},2715839340:{statBarPlace:"stat_svg",name:"Recoil Direction"},3022301683:{statBarPlace:"stat_bar",name:"Charge Rate"},3736848092:{statBarPlace:"stat_bar",name:"Guard Endurance"},3871231066:{statBarPlace:null,name:"Magazine"},1931675084:{statBarPlace:null,name:"Inventory Size"},925767036:{statBarPlace:null,name:"Ammo Capacity"}},a=Rt("Auto Rifle"),r=[];return a==null||a.forEach((e,i)=>{const s=n[e];switch(r.push(t("div",{className:R.name,children:s.name},`${i}a`)),r.push(t("div",{className:R.value,children:P.all[e]},`${i}b`)),s.statBarPlace){case"stat_bar":const c=P.perks[e],o=P.mod[e],u=P.masterwork[e];r.push(p("div",{className:R.barr,children:[c?t("div",{style:{width:`${c}%`}}):null,o?t("div",{style:{width:`${o}%`}}):null,u?t("div",{style:{width:`${u}%`}}):null]},`${i}c`));break;case"stat_svg":r.push(t(St,{recoilStat:P.perks[e]},i+30));break;case"stat_letter":r.push(p("div",{children:[" ",s.statBarPlace]},`${i}g`))}}),p("div",{className:R.stats,children:[r,"add in game stats"]})}const jt=n=>n.replace(/\r/g,"").split(/(< table (?:formula )?>[^]*?<\$>)/g).flatMap(a=>{if(!a)return[];const r=a.startsWith(`
`)?a.slice(1):a;return r.endsWith(`
`)?r.slice(0,-1):r}),Lt=n=>n.map(a=>a.startsWith("< table ")?{tableLines:a.split(/\n/)}:{lines:a.split(/\n/)}),Ut=n=>{const a=i=>i.map(s=>{var y;const c=new RegExp(/(<center\/>)|(<bold\/>)|(<background\/>)/g),o=(y=s.match(c))==null?void 0:y.join(" ").replace(/<|\/>/g,""),u=s.replace(c,"");return{lineText:u===""?void 0:u,className:u==""?"spacer":o}}),r=i=>{const s=!!i[0].match(/formula/);return{table:i.flatMap(o=>o.match(/(< table (?:formula )?>|<\$>)/)?[]:a([o])),className:"table",formula:s}},e=[];return n.forEach(i=>{i.lines&&a(i.lines).forEach(s=>e.push(s)),i.tableLines&&e.push(r(i.tableLines))}),e},Vt=n=>n.map(a=>{if(!a.table)return a;const r=a.table.map(e=>{var c;const i="(\\|)(?!.*\\|).*",s="\\|?.*?(?=\\|)";return h(l({},e),{lineText:(c=e.lineText)==null?void 0:c.match(new RegExp(`(${i})|(${s})`,"g"))})});return h(l({},a),{table:r})}),Gt=n=>{const a=e=>{const i=[e.startsWith("|")?"(\\||\\|b)\\s*<(?:bold":"<(?:bold","highlight_[1-4]","pve|pvp","link|title|formula","stasis|arc|solar|void","primary|special|heavy","background|center)"].join("|"),s="/>";return e.split(new RegExp(`(${i}.*?${s})`,"g")).flatMap(o=>{var _,C,k;if(o.trim()==="")return[];if(!o.match(/^(<|\|)/))return{text:o};const u=o.includes("<formula"),y=o.includes("<title");let g=((_=o.match(new RegExp(i,"g")))==null?void 0:_.join(" ").replaceAll("<",""))||"",m=o.replace(new RegExp(`${i}|${s}`,"g"),"");o.startsWith("|")&&(g=`${g} ${o.startsWith("|b")?"bold":""}`.trim(),m=m.replace(/\|b|\|/g,"").trim());const d=o.match(/(https:.+? )|((?<=https:.+? ).*(?=\/>))/g);if(d)return{linkUrl:(C=d==null?void 0:d[0])==null?void 0:C.trim(),linkText:d==null?void 0:d[1].trim(),className:g};const f=o.match(/\[.*\]/g);if(f&&y)return{title:f[0].replace(/[[\]]/g,""),text:m.replace(/\[.*\]/g,"").trim(),className:g};if(u){const v=(k=m.match(/(ready|stow|range|reload)_\d+/g))==null?void 0:k[0];return{formulaText:m.replace(v||"","").trim(),formula:v==null?void 0:v.trim(),className:g}}return!m.trim()&&!g.trim()?[]:{text:m,className:g}})},r=e=>e.map(i=>{var c;const s=(c=i.lineText)==null?void 0:c.flatMap(o=>a(o));return h(l({},i),{lineText:s})});return n.map(e=>e.table?h(l({},e),{table:r(e.table)}):e.lineText?h(l({},e),{lineText:a(e.lineText)}):e)};function Q(n){const a=jt(n),r=Lt(a),e=Ut(r),i=Vt(e);return Gt(i)}function Ot({onMount:n}){const a=b.exports.useContext(M),r=b.exports.useContext(D),[e,i]=b.exports.useState(null),[s,c]=b.exports.useState(!1);return b.exports.useEffect(()=>{var u,y,g,m;if(!e){i(n()),c(!0);return}const o=d=>{const f={normal:{main:e.normal.main.getValue(),secondary:e.normal.secondary.getValue()},diff:{main:e.diff.main.getModifiedEditor().getValue(),secondary:e.diff.secondary.getModifiedEditor().getValue()}};a(_=>h(l({},_),{dataFromEditor:{converted:{mainEditor:Q(f.normal.main),secondaryEditor:Q(f.normal.secondary)},original:{mainEditor:f.normal.main,secondaryEditor:f.normal.secondary}}})),d==="normal"&&(f.normal.main!=f.diff.main&&e.diff.main.getModifiedEditor().setValue(f.normal.main),f.normal.secondary!=f.diff.secondary&&e.diff.secondary.getModifiedEditor().setValue(f.normal.secondary)),d==="diff"&&(f.normal.main!=f.diff.main&&e.normal.main.setValue(f.diff.main),f.normal.secondary!=f.diff.secondary&&e.normal.secondary.setValue(f.diff.secondary))};(u=e.normal.main.getModel())==null||u.onDidChangeContent(()=>o("normal")),(y=e.normal.secondary.getModel())==null||y.onDidChangeContent(()=>o("normal")),(g=e.diff.main.getModifiedEditor().getModel())==null||g.onDidChangeContent(()=>o("diff")),(m=e.diff.secondary.getModifiedEditor().getModel())==null||m.onDidChangeContent(()=>o("diff"))},[s]),b.exports.useEffect(()=>{var m,d,f;if(!e)return;const o=r.ItemData.id,u=(m=r.dataFromGithub)==null?void 0:m[o],y=((d=u==null?void 0:u.editor)==null?void 0:d.mainEditor)||"",g=((f=u==null?void 0:u.editor)==null?void 0:f.secondaryEditor)||"";e.normal.main.setValue(y),e.diff.main.getModifiedEditor().setValue(y),e.diff.main.getOriginalEditor().setValue(y),e.normal.secondary.setValue(g),e.diff.secondary.getModifiedEditor().setValue(g),e.diff.secondary.getOriginalEditor().setValue(g)},[r.ItemData.id]),p("div",{className:"editor-container",children:[t("div",{id:"editor-1"}),t("div",{id:"editor-2"}),t("div",{id:"diffEditor-1",className:"hidden"}),t("div",{id:"diffEditor-2",className:"hidden"})]})}function Wt(){var c;x.register({id:"clarityLangue"}),x.setMonarchTokensProvider("clarityLangue",{tokenizer:{root:[[/< table >/,"table","@table"],[/<(stasis|arc|solar|void|primary|special|heavy|background|center)/,"selfContained","@selfContained"],[/<(highlight_[1-4]|pve|pvp|bold)/,"highlight","@highlight"],[/<(formula|link)/,"extra","@extra"],[/<title /,"title","@title"]],table:[[/<\$>/,"tableEnd","@pop"],[/\|b|\|/,"tableSeparator"],[/<(stasis|arc|void|solar|background|center)/,"selfContained","@selfContained"],[/<(highlight_[1-4]|bold|primary|special|heavy|pve|pvp)/,"highlight","@highlight"],[/<(formula|link)/,"extra","@extra"]],selfContained:[[/\/>/,"selfContained","@pop"],[/./,"selfContained.text"]],highlight:[[/\/>/,"highlight","@pop"],[/./,"highlight.text"]],extra:[[/\/>/,"extra","@pop"],[/(ready|stow|range|reload)_\d+/,"extra.content"],[/https:.+? /,"extra.content"],[/./,"extra.text"]],title:[[/\/>/,"title","@pop"],[/\[.*\]/,"title.text"]]}}),N.defineTheme("myCoolTheme",{base:"vs",inherit:!1,rules:[{token:"table",foreground:"4fc1ff"},{token:"tableSeparator",foreground:"4fc1ff"},{token:"tableEnd",foreground:"4fc1ff"},{token:"selfContained",foreground:"9cdcfe"},{token:"selfContained.text",foreground:"d16969"},{token:"highlight",foreground:"4fc1ff"},{token:"highlight.text",foreground:"ffffff"},{token:"extra",foreground:"4ec9b0"},{token:"extra.text",foreground:"ffffff"},{token:"extra.content",foreground:"4fc1ff"},{token:"bold.selfContained",foreground:"9cdcfe"},{token:"bold",foreground:"4fc1ff"},{token:"bold.text",foreground:"ffffff"},{token:"title",foreground:"4ec9b0"},{token:"title.text",foreground:"4fc1ff"}],colors:{"editor.foreground":"#ffffff","editor.background":"#1e1e1e","editorLineNumber.foreground":"#858585","editorLineNumber.activeForeground":"#c6c6c6","editorCursor.foreground":"#ffffff","editor.lineHighlightBorder":"#fff0","editor.selectionBackground":"#004972b8","editorSuggestWidget.background":"#252526","editorSuggestWidget.border":"#454545","list.hoverBackground":"#2a2d2e","diffEditor.removedTextBackground":"#ff000070","diffEditor.insertedTextBackground":"#a0bf5652"}}),x.registerCompletionItemProvider("clarityLangue",{provideCompletionItems:()=>{const o={kind:x.CompletionItemKind.Snippet,insertTextRules:x.CompletionItemInsertTextRule.InsertAsSnippet};return{suggestions:[l({label:"table",insertText:["< table > ","$0","<$>"].join(`
`)},o),{label:"background",kind:x.CompletionItemKind.Text,insertText:"<background/>"},{label:"center",kind:x.CompletionItemKind.Text,insertText:"<center/>"},{label:"bold line",kind:x.CompletionItemKind.Text,insertText:"<bold/>"},{label:"stasis",kind:x.CompletionItemKind.Text,insertText:"<stasis/>"},{label:"arc",kind:x.CompletionItemKind.Text,insertText:"<arc/>"},{label:"void",kind:x.CompletionItemKind.Text,insertText:"<void/>"},{label:"solar",kind:x.CompletionItemKind.Text,insertText:"<solar/>"},{label:"primary",kind:x.CompletionItemKind.Text,insertText:"<primary/>"},{label:"special",kind:x.CompletionItemKind.Text,insertText:"<special/>"},{label:"heavy",kind:x.CompletionItemKind.Text,insertText:"<heavy/>"},l({label:"highlight",insertText:"<highlight_${1:1} ${2: } />"},o),l({label:"bold text",insertText:"<bold ${1: } />"},o),l({label:"pve",insertText:"<pve ${1: } />"},o),l({label:"pvp",insertText:"<pvp ${1: } />"},o),l({label:"link",insertText:"<link ${1: } ${2: }>"},o),l({label:"combatant",insertText:"<link https://d2clarity.page.link/combatant ${1:Combatant}/>"},o),l({label:"formula_ready",insertText:"<formula ${2:Ready Speed:} ready_${1:0} />"},o),l({label:"formula_stow",insertText:"<formula ${2:Stow Speed:} stow_${1:0} />"},o),l({label:"formula_range",insertText:"<formula ${2:In_Game Range:} range_${1:0} />"},o),l({label:"formula_reload",insertText:"<formula ${2:Reload Time:} reload_${1:0} />"},o),l({label:"formula_ready_empty",insertText:"<formula ready_${1:0} />"},o),l({label:"formula_stow_empty",insertText:"<formula stow_${1:0} />"},o),l({label:"formula_range_empty",insertText:"<formula range_${1:0} />"},o),l({label:"formula_reload_empty",insertText:"<formula reload_${1:0} />"},o),l({label:"title",insertText:"<title ${1: } [${1: }] />"},o)]}}});const n={theme:"myCoolTheme",language:"clarityLangue",minimap:{enabled:!1},automaticLayout:!0,wordWrap:"on",mouseWheelZoom:!0},a=h(l({},n),{lineNumbersMinChars:2,lineDecorationsWidth:0}),r=h(l({},n),{lineNumbersMinChars:3,lineDecorationsWidth:15,renderOverviewRuler:!1,renderIndicators:!1}),e={normal:{main:document.querySelector("#editor-1"),secondary:document.querySelector("#editor-2")},diff:{main:document.querySelector("#diffEditor-1"),secondary:document.querySelector("#diffEditor-2")}},i={main:{original:N.createModel("","clarityLangue"),modified:N.createModel("","clarityLangue")},secondary:{original:N.createModel("","clarityLangue"),modified:N.createModel("","clarityLangue")}},s={normal:{main:N.create(e.normal.main,a),secondary:N.create(e.normal.secondary,a)},diff:{main:N.createDiffEditor(e.diff.main,r),secondary:N.createDiffEditor(e.diff.secondary,r)}};return s.diff.main.setModel({modified:i.main.modified,original:i.main.original}),s.diff.secondary.setModel({modified:i.secondary.modified,original:i.secondary.original}),(c=document.querySelector("#toggleEditor"))==null||c.addEventListener("click",()=>{const o=e.normal,u=e.diff;o.main.classList.toggle("hidden"),o.secondary.classList.toggle("hidden"),u.main.classList.toggle("hidden"),u.secondary.classList.toggle("hidden")}),l({},s)}const Kt={ammo:{img:"https://bungie.net/common/destiny2_content/icons/b6d3805ca8400272b7ee7935b0b75c79.png",type:"special"},breaker:{img:"https://www.bungie.net/common/destiny2_content/icons/DestinyBreakerTypeDefinition_825a438c85404efd6472ff9e97fc7251.png",type:"special"},element:{img:"https://www.bungie.net/common/destiny2_content/icons/DestinyDamageTypeDefinition_530c4c3e7981dc2aefd24fd3293482bf.png",type:"special"},power:69420,name:"FADING SHADOW'S BURDEN"};function Zt(){return p(T,{children:[p("div",{className:"item_popup",children:[t(ft,l({},Kt)),t(nt,{}),t(Bt,{}),t(Mt,{}),t(Ct,{})]}),t(Ot,{onMount:Wt}),p("div",{className:"side_bar",children:[p("div",{className:"id_button",children:[t(ye,{}),t(S,{labelText:"Get data from bungie",fnName:"addBungieData"})]}),t(fe,{}),t(me,{}),t(S,{labelText:"Change Editor"}),t(S,{labelText:"Get updated data",fnName:"download"}),t(Me,{}),t(S,{labelText:"Add / Update - Database",fnName:"uploadClovis"}),t(S,{labelText:"Add / Update - Live database",fnName:"uploadIce"}),t(we,{})]})]})}ae.render(t(L.StrictMode,{children:t(ce,{children:t(Zt,{})})}),document.getElementById("app"));
