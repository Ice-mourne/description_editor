var Y=Object.defineProperty,ee=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var V=(e,n,i)=>n in e?Y(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,d=(e,n)=>{for(var i in n||(n={}))ne.call(n,i)&&V(e,i,n[i]);if(U)for(var i of U(n))ae.call(n,i)&&V(e,i,n[i]);return e},u=(e,n)=>ee(e,te(n));import{j as B,R as L,r as f,l as g,e as y,a as ie}from"./vendor.953d3f7a.js";const re=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function i(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(o){if(o.ep)return;o.ep=!0;const s=i(o);fetch(o.href,s)}};re();async function G(e){const n=await e.json();if(e.status!==200){const i=n.message;console.error(`Error: ${e.status} - ${i}`);const a=document.querySelector("#message");a&&(a.textContent=`${a.textContent}
${i} \u{1F612}`.trim(),setTimeout(()=>{a.textContent=""},15e3))}else{const i=document.querySelector("#message");i&&(i.textContent=`${i.textContent} \u{1F355}`.trim(),setTimeout(()=>{i.textContent=""},15e3))}return{content:typeof n.content=="string"?JSON.parse(atob(n.content)):null,sha:n.sha}}const Z=localStorage.getItem("key"),O={getDescriptionClovis:"https://api.github.com/repos/Clovis-Breh/clarity-database/contents/descriptions.json",getDescriptionIce:"https://api.github.com/repos/Ice-mourne/clarity-database/contents/descriptions.json",getRateLimit:"https://api.github.com/rate_limit",putDescriptionClovis:"https://api.github.com/repos/Clovis-Breh/clarity-database/contents/descriptions.json",putDescriptionIce:"https://api.github.com/repos/Ice-mourne/clarity-database/contents/descriptions.json"};async function A(e){const n=await fetch(O[e],{method:"GET",mode:"cors",headers:{authorization:`token ${atob(Z)}`,accept:"application/vnd.github.v3+json"}});return await G(n)}async function z(e,n){const i=await fetch(O[e],{method:"PUT",mode:"cors",headers:{authorization:`token ${atob(Z)}`,accept:"application/vnd.github.v3+json"},body:JSON.stringify({sha:n.sha,branch:"main",message:`Updated ${new Date().toLocaleString()}`,content:btoa(`${JSON.stringify(n.content,null,2)}
`)})});G(i)}async function W(){const e=await A("getDescriptionClovis");if(!!e.content)return e.content}async function oe(e){const n=e.perkData,i=e.dataFromEditor.converted,a=e.dataFromEditor.original,o={name:n.name,id:n.id,armorName:n.armorName,armorId:n.armorId,description:i.mainEditor,simpleDescription:Object.keys(i.secondaryEditor).length>0?i.secondaryEditor:void 0,editor:{mainEditor:a.mainEditor,secondaryEditor:a.secondaryEditor},lastUpdate:Date.now()},s=await A("getDescriptionClovis"),c={sha:s.sha,content:u(d({},s.content),{[e.inputData.type]:u(d({},s.content[e.inputData.type]),{[o.id]:o})})};return z("putDescriptionClovis",c),c}async function se(e){const n=await oe(e),i=await A("getDescriptionIce"),a=c=>Object.entries(c).reduce((r,[l,h])=>(delete h.editor,u(d({},r),{[l]:h})),{}),s=Object.entries(n.content).reduce((c,[r,l])=>u(d({},c),{[r]:a(l)}),{});z("putDescriptionIce",{sha:i.sha,content:s})}const t=B.exports.jsx,m=B.exports.jsxs,T=B.exports.Fragment,C=L.createContext({}),D=L.createContext({});function ce({children:e}){const[n,i]=f.exports.useState({inputData:{inputId:"",type:"none",rarity:""},perkData:{id:0,name:"Fading Memory",armorId:void 0,armorName:void 0,defaultDescription:"",lastUpdate:"",descriptions:{mainEditor:"",secondaryEditor:""}},dataFromEditor:{converted:{mainEditor:{},secondaryEditor:{}},original:{mainEditor:"",secondaryEditor:""}},dataFromGithub:{},error:""});return f.exports.useEffect(()=>{W().then(a=>{i(o=>u(d({},o),{dataFromGithub:a}))}),A("getRateLimit").then(console.log)},[]),t(C.Provider,{value:n,children:t(D.Provider,{value:i,children:e})})}const le="_info_display_of2ab_1";var de={info_display:le};function me(){const e=f.exports.useContext(C),n=e.perkData;function i(){switch(e.inputData.type){case"armorExotic":return m(T,{children:[t("label",{children:"Armor name"}),t("span",{id:"input_item_name",children:n.armorName||""}),t("label",{children:"Armor id"}),t("span",{id:"input_item_id",children:n.armorId||""}),t("label",{children:"Perk name"}),t("span",{id:"input_name",children:n.name||""}),t("label",{children:"Perk id"}),t("span",{id:"input_id",children:n.id||""})]});case"armorMods":case"weaponMods":return m(T,{children:[t("label",{children:"Mod name"}),t("span",{id:"input_item_name",children:n.name||""}),t("label",{children:"Mod id"}),t("span",{id:"input_item_id",children:n.id||""})]});default:return m(T,{children:[t("label",{children:"Perk name"}),t("span",{id:"input_item_name",children:n.name||""}),t("label",{children:"Perk id"}),t("span",{id:"input_item_id",children:n.id||""})]})}}return m("div",{className:de.info_display,children:[i(),t("label",{children:"Last update"}),t("span",{id:"input_item_id",children:e.perkData.lastUpdate})]})}const pe="_selection_list_1ea9h_1";var ue={selection_list:pe};function he(){const e=f.exports.useContext(D),n=f.exports.useContext(C),i=c=>{e(r=>u(d({},r),{inputData:u(d({},r.inputData),{type:c.target.value})}))},a=c=>{e(r=>u(d({},r),{inputData:u(d({},r.inputData),{rarity:c.target.value})}))},o=()=>{var c;return Object.values(((c=n.dataFromGithub)==null?void 0:c[n.inputData.type])||{}).map(r=>t("option",{value:r.id,children:r.name},r.id))},s=c=>{var l,h;const r=(h=(l=n.dataFromGithub)==null?void 0:l[n.inputData.type])==null?void 0:h[c.target.value];!r||e(_=>{var b,x;return u(d({},_),{perkData:u(d({},_.perkData),{id:r.id,name:r.name,armorId:r.armorId,armorName:r.armorName,lastUpdate:new Date(r.lastUpdate).toLocaleString(),descriptions:{mainEditor:(b=r.editor)==null?void 0:b.mainEditor,secondaryEditor:(x=r.editor)==null?void 0:x.secondaryEditor}})})})};return m("div",{className:ue.selection_list,children:[m("select",{onChange:c=>i(c),children:[t("option",{value:"none",children:"Select description type"}),t("option",{value:"armorExotic",children:"Exotic Armor"}),t("option",{value:"armorMods",children:"Armor Mod"}),t("option",{value:"weaponPerks",children:"Weapon Perk"}),t("option",{value:"weaponFrames",children:"Weapon Frame"}),t("option",{value:"weaponMods",children:"Weapon Mod"})]}),m("select",{onChange:c=>a(c),children:[t("option",{value:"undefined",children:"Rarity All"}),t("option",{value:"normal",children:"Rarity Normal"}),t("option",{value:"exotic",children:"Rarity Exotic"})]}),t("select",{onChange:c=>s(c),children:o()})]})}const K=async e=>new Promise((n,i)=>{fetch(`https://www.bungie.net/Platform/Destiny2/Manifest/DestinyInventoryItemDefinition/${e}`,{method:"GET",mode:"cors",headers:{"X-API-Key":"cda7b6e4fc9f49ada4fed618e11841ab"}}).then(a=>a.json()).then(a=>n(a.Response)).catch(i)});function fe(e){const n=async a=>{const o=a.sockets.socketEntries[11].singleInitialItemHash,s=await K(o);return{id:s.hash,name:s.displayProperties.name,armorId:a.hash,armorName:a.displayProperties.name,description:s.displayProperties.description}},i=a=>({id:a.hash,name:a.displayProperties.name,description:a.displayProperties.description});return K(e).then(a=>a.itemType==2?n(a):i(a)).catch(console.error)}const ge="_button_10xcl_1";var _e={button:ge};function M({labelText:e}){const n=f.exports.useContext(C),i=f.exports.useContext(D),a=()=>{fe(n.inputData.inputId).then(l=>i(u(d({},n),{perkData:d(d({},n.perkData),l)})))},o=n.perkData.id?()=>se(n):()=>{},s=()=>W().then(l=>i(h=>u(d({},h),{dataFromGithub:l}))),c=e=="Get data from bungie"?a:e=="Add / Update description"?o:e=="Get updated data"?s:void 0,r=e=="Change Editor"?"toggleEditor":void 0;return t("button",{className:_e.button,onClick:c,id:r,children:e})}const be="_id_input_1pgx1_1";var ve={id_input:be};function ye(){const e=d({},f.exports.useContext(C)),n=f.exports.useContext(D),i=a=>(e.inputData.inputId=a.target.value,n(e));return m("div",{className:ve.id_input,children:[t("span",{children:"ID:"}),t("input",{type:"number",onChange:a=>i(a)})]})}const ke="_message_mry3j_1";var xe={message:ke};function Ce(){return t("div",{className:xe.message,id:"message"})}const Ee="_stat_input_1lhzz_1",we="_stat_name_1lhzz_13",Te="_buttons_1lhzz_17",De="_stat_container_1lhzz_31";var E={stat_input:Ee,stat_name:we,buttons:Te,stat_container:De};function Ne(){const[e,n]=f.exports.useState([]),i=o=>{const s=o.target.value;e.includes(s)?n(c=>c.filter(r=>r!=s)):n(c=>[...c,s])};console.log(e);const a=e.map((o,s)=>m("div",{className:E.stat_container,children:[t("div",{className:E.stat_name,children:o}),m("div",{className:E.buttons,children:[t("button",{children:"Add Active"}),t("button",{children:"Add Passive"}),t("button",{children:"Remove"})]}),t("div",{className:E.stat_name,children:"Passive"}),m("div",{className:E.stat_input,children:[t("span",{children:"Stat"}),t("input",{}),t("span",{children:"Multiplier"}),t("input",{})]}),m("div",{className:E.stat_name,children:[o," Active"]}),m("div",{className:E.stat_input,children:[t("span",{children:"Stat"}),t("input",{}),t("span",{children:"Multiplier"}),t("input",{})]})]},s));return m(T,{children:[m("select",{onChange:o=>i(o),children:[t("option",{value:"",children:"Select stat"}),t("option",{value:"range",children:"Range"}),t("option",{value:"handling",children:"Handling"}),t("option",{value:"reload",children:"Reload"}),t("option",{value:"readyStow",children:"Ready Stow"}),t("option",{value:"ready",children:"Ready"}),t("option",{value:"stow",children:"Stow"})]}),t("div",{children:a})]})}const Ie="_pvp_1l6kr_1",Se="_pve_1l6kr_5",Ae="_highlight_1_1l6kr_9",Me="_highlight_2_1l6kr_13",Pe="_highlight_3_1l6kr_17",Re="_highlight_4_1l6kr_21",$e="_arc_1l6kr_25",Fe="_solar_1l6kr_26",Be="_stasis_1l6kr_28",Le="_primary_1l6kr_33",je="_special_1l6kr_34",Ue="_heavy_1l6kr_35",Ve="_center_1l6kr_110",Ge="_spacer_1l6kr_114",Ze="_bold_1l6kr_118",Oe="_background_1l6kr_122",ze="_title_1l6kr_126",We="_link_1l6kr_130",Ke="_table_1l6kr_137";var J={pvp:Ie,pve:Se,highlight_1:Ae,highlight_2:Me,highlight_3:Pe,highlight_4:Re,arc:$e,solar:Fe,void:"_void_1l6kr_27",stasis:Be,primary:Le,special:je,heavy:Ue,center:Ve,spacer:Ge,bold:Ze,background:Oe,title:ze,link:We,table:Ke};const Je=e=>{if(e)return`${Math.round(Math.random()*1e3)}ms`},qe=e=>{if(e.linkUrl)return t("a",{href:e.linkUrl,children:e.linkText});if(e.formula||e.formulaText)return m("span",{children:[e.formulaText," ",Je(e.formula)]})},q=e=>e==null?void 0:e.split(" ").map(n=>J[n]).join(" ");function He({description:e}){const n=(o,s)=>{var c;return t("div",{className:q(o.className),children:(c=o.lineText)==null?void 0:c.map((r,l)=>t("span",{className:q(r.className),title:r.title,children:r.text||qe(r)},l))},s)},i=(o,s)=>t("div",{className:J.table,children:o.map((c,r)=>n(c,r))},s);return t("div",{children:(o=>{if(!(!o||Object.keys(o).length===0))return o==null?void 0:o.map((s,c)=>(s==null?void 0:s.table)?i(s.table,c):n(s,c))})(e)})}const Qe="_notes_1hbar_1",Xe="_pencil_1hbar_7";var Ye={notes:Qe,pencil:Xe};function et(){return m("div",{className:Ye.notes,children:[t("div",{className:"fas fa-pencil-alt"}),t("div",{className:"text",children:"Add a note"})]})}var tt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAAoCAYAAACrUDmFAAAAAXNSR0IArs4c6QAABXlJREFUaEPdWu1yIjkMlGd/JnncvQUeAAh53MDPta9aUtvyMJCAuU32qFQKgsd267MlJcmV1+b4VvA1fiVdV6QUkaQf8KtIkeTf2Tp80G9ykTThjT3Jl60p+NHF+Nre379m+/xPf0jY6+IXCs4wtMuFzwbNwZZkUFUStigXkckF0QTE7bg1hMOdKMQb1uBACFySbJ9/LmJZ/OPawdmFHR/20g2TQI3UIvE37HZ51Y4/amv1sSYz1zT+mCW5MG5c4/vaPYtsn841eQZwc3orBQCqFZ7LIILKpXSagkjtWRPE3ZcP5v7RPqZFs4TdTJPd7dfvB1ONa8oewl2pAtNi9R9XiWExX4x++NHFdNf/QAjbp2auFSDMMpViMSElwXuLGMuq78PC13yqrrQgKIJUgIyWus68RbWGSLh7uRyhvgZWf+r69GZxesESYK4pRkuCo+Z2C077HUDN74C4ccnUO4BRg7srueU7glRzZZYKETsZ+pq39e6Xcsp3BBbvBGuc59xegx4GHwGQh83D9pl5HQ8a5B91ZtxfwZ5pMInEMHuP1jbHA1KpUTVcPoTtuF8fBcctR7G4n5FZGUA634M0aNprjOaSdjang+clgz2qxZgNKiRG0UijPjKra1qF9ipNC1RqfnmAU3IAkmBMS0P9diAt0RprUAEjq2kiaHHERNfQSnamVrnNOYXqBOFRDixpP5CaYvWjSgBPqWo16qhXGjEVZUSoJpTjt/A8TzsM660Ys7Uj1mNnm6Z4cgeQvjgC8J6g9Khn1Hq8wIT5I8b1GnRf+GsB1uDWirf/lwaPh1rTWKeBQcYdktFsRIMsuRIijUxSchb5IbJ7+tWXZriMVi/B+UVk99yvu8V8V6e3MqGVUEu+mYk+wgfXmuRRjUxSSjYASeR1Fh1XClAke9uA6PcDHJg+qMFNrTQ93gdXIL0lK4tBueWdJ9nPNPPr/VAmgQAgCPRvrJDevtyvQQi3mYk3TuZ5ECt2F6jVZ8xF67NS5LeI/EioYkyT+9nF1++vRbWrhgxNWpE9UsVAuFqvh35fTfRKw/01losOJXm3C0ehZwNtzn1wc3y1liQ7cXDFLLIfYDItt7YejXJRBhcmx5EgA0fX4MFEj86AnDMUaNrOzUoKgHRKSPT3dxCwJ9lKUrohkmhSjVVdZv+fMlEtPN3J/eJLDMVcw5ZCGOR3I1SNPlgVBrOPB5Ekj5toMtO7QtW0pFJ/Me2ZP475oAF0ssaOX9VgcM0RgMZtq6VoTgKQ+Z61VCI4b1WOnE0NIgMzFXZBhtFnzA/6Go9he+7XIARKG11z5JAjja6V93Urycf+QG19UHJwSPt+R2c1zxmFmsxCl4DBzZyQ3HG0mghYOLdoJuXFZxHZvSwPMj4TZL5yTavoW85TE9UIps4uUnTkJTJCmb4CJCxHa1BP6Bw3pI37AnmoTZDgG9NQ8fknQa5O4LWYNVrmqbMSfMZFzOFbk8gAWpAf8cc/AVLBMYnTlz2mILCF4curVsPZc5d+k1AVf+Phi2su5lHPrLXt0tVokAanllOcvao6vfRhKnUN19lcGLHVmMipm/t87JfwIp2WQc69YaUmlL0D4ZGY3MF5j02Y2V0K+TSmmg4gzVXrXyRojnh9IGr3rFyhTnGNXCfJPrUl1yZmHWdXu6cM+9l+azKQKMezKAZvJuEimI8r5+V/Cdh953n0DKCC9N5mHNArVmy6KFU7JDIIFgnYLwJsWnAi5zf4nBCMIRlNsWhPq8A5S/+MsAiwB5m9IJ08H8f/qyDbZOuhzkx9MmySvxXgNSE0swxgr3DYiwAV5OlQsrbfWPxYCiFLsc6qU3SPYHo5j2K1mHBj1jgdJH+rlo0/u4l7SwLHXeOv/wLWRuBwVZFjtwAAAABJRU5ErkJggg==";const nt="_header_abt89_1",at="_name_abt89_10",it="_bottom_abt89_19",rt="_left_abt89_25",ot="_right_abt89_32",st="_type_abt89_38",ct="_ammo_abt89_43",lt="_breaker_abt89_49",dt="_element_abt89_55",mt="_power_abt89_60";var v={header:nt,name:at,bottom:it,left:rt,right:ot,type:st,ammo:ct,breaker:lt,element:dt,power:mt};function pt(e){var a;const n=m("div",{className:v.left,children:[t("div",{className:v.type,children:"Shadow Rifle"}),e.ammo.img?t("img",{className:v.ammo,src:tt}):null,e.breaker.img?t("img",{className:v.breaker,src:e.breaker.img}):null]}),i=m("div",{className:v.right,children:[((a=e.element)==null?void 0:a.img)?t("img",{className:v.element,src:e.element.img}):null,t("div",{className:v.power,children:e.power})]});return m("div",{className:v.header,children:[t("a",{className:v.name,children:e.name}),m("div",{className:v.bottom,children:[n,i]})]})}const ut="_perk_box_z1cvm_1",ht="_perk_list_z1cvm_9",ft="_perk_z1cvm_1",gt="_perk_active_z1cvm_28",_t="_icon_container_z1cvm_32",bt="_icon_container_active_z1cvm_45",vt="_name_z1cvm_49",yt="_name_active_z1cvm_55",kt="_description_z1cvm_59";var k={perk_box:ut,perk_list:ht,perk:ft,perk_active:gt,icon_container:_t,icon_container_active:bt,name:vt,name_active:yt,description:kt};function xt(){const e=f.exports.useContext(C),n=[];for(let i=0;i<4;i++){const a=i==0?e==null?void 0:e.dataFromEditor.converted.mainEditor:i==1?e==null?void 0:e.dataFromEditor.converted.secondaryEditor:null;n.push(m("div",{className:k.perk_list,children:[a?t("div",{className:k.description,children:t(He,{description:a})}):null,m("div",{className:`${k.perk} ${k.perk_active}`,children:[t("div",{className:`${k.icon_container} ${k.icon_container_active}`,children:t("img",{src:"https://bungie.net/common/destiny2_content/icons/f2ff6ea4498ad2d808b4af21e93cf5fe.png"})}),t("div",{className:`${k.name} ${k.name_active}`,children:e==null?void 0:e.perkData.name})]})]},i))}return t("div",{className:k.perk_box,children:n})}const Ct="_item_sockets_1hqtd_1",Et="_frame_img_1hqtd_9",wt="_sockets_1hqtd_16",Tt="_frame_info_1hqtd_32",Dt="_masterwork_img_1hqtd_44";var N={item_sockets:Ct,frame_img:Et,sockets:wt,frame_info:Tt,masterwork_img:Dt};function Nt(){return m("div",{className:N.item_sockets,children:[t("img",{className:N.frame_img,src:"https://www.bungie.net/common/destiny2_content/icons/0ce2f3a9046c3b1e2fc007d903563e66.png"}),m("div",{className:N.frame_info,children:[t("div",{children:"Shadow Frame"}),t("div",{children:"420 rpm / 69 impact"})]}),m("div",{className:N.sockets,children:[t("div",{children:t("img",{src:"https://www.bungie.net/common/destiny2_content/icons/aeacc06cbe147ec400a10225a4dcd504.png"})}),t("div",{children:t("img",{src:"https://www.bungie.net/common/destiny2_content/icons/4e3573080845b4ee9efcb000d4924cb0.jpg"})}),m("div",{className:N.masterwork_img,children:[t("img",{src:"https://www.bungie.net/common/destiny2_content/icons/8ebd558417d6c02e3ed2ffadc4bdbc48.jpg"}),t("img",{src:"https://www.bungie.net/common/destiny2_content/icons/5c935649e5d3e72c967d6b20c3e44e85.png"})]})]})]})}function It(e){const n=e.recoilStat,i=1+Math.cos((-20-n*.6)*Math.PI/180),a=1+Math.sin((-20-n*.6)*Math.PI/180),o=2-i,s=Math.sin((5+n)*Math.PI/10)*(100-n);return m("svg",{height:"12",viewBox:"0 0 2 1",children:[t("circle",{r:"1",cx:"1",cy:"1",fill:"rgba(24, 30, 37, 1)"}),t("path",{style:{transform:`rotate(${s*.8}deg)`,transformOrigin:"50% 100%"},d:`M 1 1 L ${o} ${a} A 1 1 0 0 1 ${i} ${a} Z`,fill:"#FFF"})]})}const St="_stats_vihyy_1",At="_name_vihyy_14",Mt="_value_vihyy_20",Pt="_barr_vihyy_26";var P={stats:St,name:At,value:Mt,barr:Pt};function Rt(e){switch(e){case"Auto Rifle":case"Hand Cannon":case"Pulse Rifle":case"Scout Rifle":case"Shotgun":case"Sniper Rifle":case"Submachine Gun":case"Machine Gun":return[4284893193,4043523819,1240592695,155624089,943549884,4188031367,1345609583,3555269338,2715839340,3871231066];case"Fusion Rifle":case"Linear Fusion Rifle":return[2961396640,4043523819,1240592695,155624089,943549884,4188031367,1345609583,3555269338,2715839340,3871231066];case"Rocket Launcher":case"Grenade Launcher":return[3611281802,2523465841,155624089,943549884,4188031367,1345609583,3555269338,2715839340,3871231066];case"Combat Bow":return[447667954,4043523819,1591432999,1556424089,943549884,4188031367,1345609583,3555269338,2715839340,1931675084];case"Sword":return[2837207746,4043523819,2762071195,209426660,3022301683,3736848092,925767036]}}const I={perks:{155624089:29.8,943549884:55,1240592695:79.3,1345609583:52,2715839340:86,3555269338:20,3871231066:31.6,4043523819:33,4188031367:44.2,4284893193:360},all:{155624089:30,943549884:55,1240592695:79,1345609583:52,2715839340:86,3555269338:20,3871231066:32,4043523819:33,4188031367:45,4284893193:360},mod:{155624089:0,943549884:0,1240592695:0,1345609583:0,2715839340:0,3555269338:0,3871231066:0,4043523819:0,4188031367:0,4284893193:0},masterwork:{155624089:0,943549884:0,1240592695:0,1345609583:0,2715839340:0,3555269338:0,3871231066:0,4043523819:0,4188031367:.8999999999999986,4284893193:0}};function $t(){const e={4284893193:{statBarPlace:null,name:"Rounds Per Minute"},447667954:{statBarPlace:"ms",name:"Draw Time"},2961396640:{statBarPlace:"ms",name:"Charge Time"},2837207746:{statBarPlace:"stat_bar",name:"Swing Speed"},4043523819:{statBarPlace:"stat_bar",name:"Impact"},3614673599:{statBarPlace:"stat_bar",name:"Blast Radius"},1591432999:{statBarPlace:"stat_bar",name:"Accuracy"},2523465841:{statBarPlace:"stat_bar",name:"Velocity"},2762071195:{statBarPlace:"stat_bar",name:"Guard Efficiency"},209426660:{statBarPlace:"stat_bar",name:"Guard Resistance"},1240592695:{statBarPlace:"stat_bar",name:"Range"},155624089:{statBarPlace:"stat_bar",name:"Stability"},943549884:{statBarPlace:"stat_bar",name:"Handling"},4188031367:{statBarPlace:"stat_bar",name:"Reload Speed"},1345609583:{statBarPlace:"stat_bar",name:"Aim Assistance"},3555269338:{statBarPlace:"stat_bar",name:"Zoom"},2715839340:{statBarPlace:"stat_svg",name:"Recoil Direction"},3022301683:{statBarPlace:"stat_bar",name:"Charge Rate"},3736848092:{statBarPlace:"stat_bar",name:"Guard Endurance"},3871231066:{statBarPlace:null,name:"Magazine"},1931675084:{statBarPlace:null,name:"Inventory Size"},925767036:{statBarPlace:null,name:"Ammo Capacity"}},n=Rt("Auto Rifle"),i=[];return n==null||n.forEach((a,o)=>{const s=e[a];switch(i.push(t("div",{className:P.name,children:s.name},`${o}a`)),i.push(t("div",{className:P.value,children:I.all[a]},`${o}b`)),s.statBarPlace){case"stat_bar":const c=I.perks[a],r=I.mod[a],l=I.masterwork[a];i.push(m("div",{className:P.barr,children:[c?t("div",{style:{width:`${c}%`}}):null,r?t("div",{style:{width:`${r}%`}}):null,l?t("div",{style:{width:`${l}%`}}):null]},`${o}c`));break;case"stat_svg":i.push(t(It,{recoilStat:I.perks[a]},o+30));break;case"stat_letter":i.push(m("div",{children:[" ",s.statBarPlace]},`${o}g`))}}),m("div",{className:P.stats,children:[i,"add in game stats"]})}const Ft=e=>e.replace(/\r/g,"").split(/(< table >[^]*?<\$>)/g).flatMap(n=>n||[]).map(n=>n.endsWith(`
`)?n.slice(0,-1):n).map(n=>n.startsWith(`
`)?n.slice(1):n),Bt=e=>e.reduce((n,i)=>{const a="(\\|)(?!.*\\|).*",o="\\|?.*?(?=\\|)",s=i.lineText.match(new RegExp(`(${a})|(${o})`,"g"));return n.push(u(d({},i),{lineText:s})),n},[]),H=e=>{const n=e.startsWith("< table >"),a=e.replace(/(< table >\n)|(\n<\$>)/g,"").split(/\n/).reduce((o,s)=>{var h;const c=new RegExp(/(<center\/>)|(<bold\/>)|(<background\/>)/g),r=(h=s.match(c))==null?void 0:h.join(" ").replace(/<|\/>/g,""),l=s.replace(c,"");return o.push({lineText:l,className:n?r:l==""?"spacer":r}),o},[]);return n?{table:Bt(a),className:"table"}:a},Q=e=>{const n=typeof e=="string"?e:e.lineText,i="<(?:highlight_[1-4]|pve|pvp|bold|link|title|stasis|arc|solar|void|primary|special|heavy|background|center)",a="/>",s=n.split(new RegExp(`(${i}.*?${a})`,"g")).reduce((r,l)=>{var _,b,x;const h=l.startsWith("|");if(l.startsWith("<")||h){const p=l.match(/(https:.+? )|((?<=https:.+? ).*(?=\/>))/g),w=l.match(/\[.*\]/g),R=l.includes("<formula"),j=R?(_=l.match(/(ready|stow|range|reload)_\d+/g))==null?void 0:_[0]:void 0,$=R?l.replace(j||"","").replace(/<formula |\/>/g,""):void 0;let F=(b=l.match(new RegExp(i,"g")))==null?void 0:b.join(" ").replaceAll("<",""),S=l.replace(new RegExp(`${i}|${a}`,"g"),"");return h&&(F=`${F||""} ${l.startsWith("|b")?"bold":""}`.trim()||void 0,S=S.replace(/\|b|\|/g,"").trim()),r.push({formulaText:$==null?void 0:$.replace(/\|b|\|/g,"").trim(),formula:j,linkUrl:(x=p==null?void 0:p[0])==null?void 0:x.trim(),linkText:p==null?void 0:p[1],title:w?w[0].replace(/[[\]]/g,""):void 0,className:F,text:p||R?void 0:w?S.replace(/\[.*\]/g,""):S}),r}return l.trim()&&r.push({text:l}),r},[]),c=r=>r.length==1?r:r.reduce((l,h)=>(Object.entries(h).forEach(([_,b])=>{b&&(l[_]=`${l[_]||""} ${b}`)}),l),{});return typeof e=="string"?c(s):u(d({},e),{lineText:s.length==0?void 0:s})};function X(e){return Ft(e).reduce((o,s)=>s.startsWith("< table >")?(o.push(H(s)),o):(o.push(...H(s)),o),[]).map(o=>{if(o.table){const s=o.table.map(c=>{var l;const r=(l=c.lineText)==null?void 0:l.flatMap(h=>Q(h));return u(d({},c),{lineText:r})});return u(d({},o),{table:s})}else return Q(o)})}function Lt({onMount:e}){const n=f.exports.useContext(D),i=f.exports.useContext(C),[a,o]=f.exports.useState(null),[s,c]=f.exports.useState(!1);return f.exports.useEffect(()=>{var l,h,_,b;if(!a){o(e()),c(!0);return}const r=x=>{const p={normal:{main:a.normal.main.getValue(),secondary:a.normal.secondary.getValue()},diff:{main:a.diff.main.getModifiedEditor().getValue(),secondary:a.diff.secondary.getModifiedEditor().getValue()}};n(w=>u(d({},w),{dataFromEditor:{converted:{mainEditor:X(p.normal.main),secondaryEditor:X(p.normal.secondary)},original:{mainEditor:p.normal.main,secondaryEditor:p.normal.secondary}}})),x==="normal"&&(p.normal.main!=p.diff.main&&a.diff.main.getModifiedEditor().setValue(p.normal.main),p.normal.secondary!=p.diff.secondary&&a.diff.secondary.getModifiedEditor().setValue(p.normal.secondary)),x==="diff"&&(p.normal.main!=p.diff.main&&a.normal.main.setValue(p.diff.main),p.normal.secondary!=p.diff.secondary&&a.normal.secondary.setValue(p.diff.secondary))};(l=a.normal.main.getModel())==null||l.onDidChangeContent(()=>r("normal")),(h=a.normal.secondary.getModel())==null||h.onDidChangeContent(()=>r("normal")),(_=a.diff.main.getModifiedEditor().getModel())==null||_.onDidChangeContent(()=>r("diff")),(b=a.diff.secondary.getModifiedEditor().getModel())==null||b.onDidChangeContent(()=>r("diff"))},[s]),f.exports.useEffect(()=>{if(!a)return;const r=i.perkData.descriptions.mainEditor,l=i.perkData.descriptions.secondaryEditor;!r||(a.normal.main.setValue(r),a.diff.main.getModifiedEditor().setValue(r),a.diff.main.getOriginalEditor().setValue(r),!!l&&(a.normal.secondary.setValue(l),a.diff.secondary.getModifiedEditor().setValue(l),a.diff.secondary.getOriginalEditor().setValue(l)))},[i.perkData.descriptions.mainEditor,i.perkData.descriptions.secondaryEditor]),m("div",{className:"editor-container",children:[t("div",{id:"editor-1"}),t("div",{id:"editor-2"}),t("div",{id:"diffEditor-1",className:"hidden"}),t("div",{id:"diffEditor-2",className:"hidden"})]})}function jt(){var c;g.register({id:"clarityLangue"}),g.setMonarchTokensProvider("clarityLangue",{tokenizer:{root:[[/< table >/,"table","@table"],[/<(stasis|arc|solar|void|primary|special|heavy|background|center)/,"selfContained","@selfContained"],[/<(highlight_[1-4]|pve|pvp|bold)/,"highlight","@highlight"],[/<(formula|link)/,"extra","@extra"],[/<title /,"title","@title"]],table:[[/<\$>/,"tableEnd","@pop"],[/\|b|\|/,"tableSeparator"],[/<(stasis|arc|void|solar|background|center)/,"selfContained","@selfContained"],[/<(highlight_[1-4]|bold|primary|special|heavy|pve|pvp)/,"highlight","@highlight"],[/<(formula|link)/,"extra","@extra"]],selfContained:[[/\/>/,"selfContained","@pop"],[/./,"selfContained.text"]],highlight:[[/\/>/,"highlight","@pop"],[/./,"highlight.text"]],extra:[[/\/>/,"extra","@pop"],[/(ready|stow|range|reload)_\d+/,"extra.content"],[/https:.+? /,"extra.content"],[/./,"extra.text"]],title:[[/\/>/,"title","@pop"],[/\[.*\]/,"title.text"]]}}),y.defineTheme("myCoolTheme",{base:"vs",inherit:!1,rules:[{token:"table",foreground:"4fc1ff"},{token:"tableSeparator",foreground:"4fc1ff"},{token:"tableEnd",foreground:"4fc1ff"},{token:"selfContained",foreground:"9cdcfe"},{token:"selfContained.text",foreground:"d16969"},{token:"highlight",foreground:"4fc1ff"},{token:"highlight.text",foreground:"ffffff"},{token:"extra",foreground:"4ec9b0"},{token:"extra.text",foreground:"ffffff"},{token:"extra.content",foreground:"4fc1ff"},{token:"bold.selfContained",foreground:"9cdcfe"},{token:"bold",foreground:"4fc1ff"},{token:"bold.text",foreground:"ffffff"},{token:"title",foreground:"4ec9b0"},{token:"title.text",foreground:"4fc1ff"}],colors:{"editor.foreground":"#ffffff","editor.background":"#1e1e1e","editorLineNumber.foreground":"#858585","editorLineNumber.activeForeground":"#c6c6c6","editorCursor.foreground":"#ffffff","editor.lineHighlightBorder":"#fff0","editor.selectionBackground":"#004972b8","editorSuggestWidget.background":"#252526","editorSuggestWidget.border":"#454545","list.hoverBackground":"#2a2d2e","diffEditor.removedTextBackground":"#ff000070","diffEditor.insertedTextBackground":"#a0bf5652"}}),g.registerCompletionItemProvider("clarityLangue",{provideCompletionItems:()=>{const r={kind:g.CompletionItemKind.Snippet,insertTextRules:g.CompletionItemInsertTextRule.InsertAsSnippet};return{suggestions:[d({label:"table",insertText:["< table > ","$0","<$>"].join(`
`)},r),{label:"background",kind:g.CompletionItemKind.Text,insertText:"<background/>"},{label:"center",kind:g.CompletionItemKind.Text,insertText:"<center/>"},{label:"bold line",kind:g.CompletionItemKind.Text,insertText:"<bold/>"},{label:"stasis",kind:g.CompletionItemKind.Text,insertText:"<stasis/>"},{label:"arc",kind:g.CompletionItemKind.Text,insertText:"<arc/>"},{label:"void",kind:g.CompletionItemKind.Text,insertText:"<void/>"},{label:"solar",kind:g.CompletionItemKind.Text,insertText:"<solar/>"},{label:"primary",kind:g.CompletionItemKind.Text,insertText:"<primary/>"},{label:"special",kind:g.CompletionItemKind.Text,insertText:"<special/>"},{label:"heavy",kind:g.CompletionItemKind.Text,insertText:"<heavy/>"},d({label:"highlight",insertText:"<highlight_${1:1} ${2: } />"},r),d({label:"bold text",insertText:"<bold ${1: } />"},r),d({label:"pve",insertText:"<pve ${1: } />"},r),d({label:"pvp",insertText:"<pvp ${1: } />"},r),d({label:"link",insertText:"<link ${1: } ${2: }>"},r),d({label:"combatant",insertText:"<link https://d2clarity.page.link/combatant ${1:Combatant}/>"},r),d({label:"formula_ready",insertText:"<formula ${2:Ready Speed:} ready_${1:0} />"},r),d({label:"formula_stow",insertText:"<formula ${2:Stow Speed:} stow_${1:0} />"},r),d({label:"formula_range",insertText:"<formula ${2:In_Game Range:} range_${1:0} />"},r),d({label:"formula_reload",insertText:"<formula ${2:Reload Time:} reload_${1:0} />"},r),d({label:"formula_ready_empty",insertText:"<formula ready_${1:0} />"},r),d({label:"formula_stow_empty",insertText:"<formula stow_${1:0} />"},r),d({label:"formula_range_empty",insertText:"<formula range_${1:0} />"},r),d({label:"formula_reload_empty",insertText:"<formula reload_${1:0} />"},r),d({label:"title",insertText:"<title ${1: } [${1: }] />"},r)]}}});const e={theme:"myCoolTheme",language:"clarityLangue",minimap:{enabled:!1},automaticLayout:!0,wordWrap:"on",mouseWheelZoom:!0},n=u(d({},e),{lineNumbersMinChars:2,lineDecorationsWidth:0}),i=u(d({},e),{lineNumbersMinChars:3,lineDecorationsWidth:15,renderOverviewRuler:!1,renderIndicators:!1}),a={normal:{main:document.querySelector("#editor-1"),secondary:document.querySelector("#editor-2")},diff:{main:document.querySelector("#diffEditor-1"),secondary:document.querySelector("#diffEditor-2")}},o={main:{original:y.createModel("","clarityLangue"),modified:y.createModel("","clarityLangue")},secondary:{original:y.createModel("","clarityLangue"),modified:y.createModel("","clarityLangue")}},s={normal:{main:y.create(a.normal.main,n),secondary:y.create(a.normal.secondary,n)},diff:{main:y.createDiffEditor(a.diff.main,i),secondary:y.createDiffEditor(a.diff.secondary,i)}};return s.diff.main.setModel({modified:o.main.modified,original:o.main.original}),s.diff.secondary.setModel({modified:o.secondary.modified,original:o.secondary.original}),(c=document.querySelector("#toggleEditor"))==null||c.addEventListener("click",()=>{const r=a.normal,l=a.diff;r.main.classList.toggle("hidden"),r.secondary.classList.toggle("hidden"),l.main.classList.toggle("hidden"),l.secondary.classList.toggle("hidden")}),d({},s)}const Ut={ammo:{img:"https://bungie.net/common/destiny2_content/icons/b6d3805ca8400272b7ee7935b0b75c79.png",type:"special"},breaker:{img:"https://www.bungie.net/common/destiny2_content/icons/DestinyBreakerTypeDefinition_825a438c85404efd6472ff9e97fc7251.png",type:"special"},element:{img:"https://www.bungie.net/common/destiny2_content/icons/DestinyDamageTypeDefinition_530c4c3e7981dc2aefd24fd3293482bf.png",type:"special"},power:69420,name:"FADING SHADOW'S BURDEN"};function Vt(){return m(T,{children:[m("div",{className:"item_popup",children:[t(pt,d({},Ut)),t(et,{}),t($t,{}),t(Nt,{}),t(xt,{})]}),t(Lt,{onMount:jt}),m("div",{className:"side_bar",children:[m("div",{className:"id_button",children:[t(ye,{}),t(M,{labelText:"Get data from bungie"})]}),t(he,{}),t(me,{}),t(M,{labelText:"Change Editor"}),t(M,{labelText:"Get updated data"}),t(M,{labelText:"Add / Update description"}),t(Ce,{}),t(Ne,{})]})]})}ie.render(t(L.StrictMode,{children:t(ce,{children:t(Vt,{})})}),document.getElementById("app"));
